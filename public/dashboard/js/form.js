var bootbox=window.bootbox||function(t,e){function s(t,e){return void 0===e&&(e=i),"string"==typeof u[e][t]?u[e][t]:e!=n?s(t,n):t}var i="en",n="en",r=!0,o="static",a="",l={},c={},h={setLocale:function(t){for(var e in u)if(e==t)return void(i=t);throw Error("Invalid locale: "+t)},addLocale:function(t,e){for(var s in void 0===u[t]&&(u[t]={}),e)u[t][s]=e[s]},setIcons:function(t){"object"==typeof(c=t)&&null!==c||(c={})},setBtnClasses:function(t){"object"==typeof(l=t)&&null!==l||(l={})},alert:function(){var t="",e=s("OK"),i=null;switch(arguments.length){case 1:t=arguments[0];break;case 2:t=arguments[0],"function"==typeof arguments[1]?i=arguments[1]:e=arguments[1];break;case 3:t=arguments[0],e=arguments[1],i=arguments[2];break;default:throw Error("Incorrect number of arguments: expected 1-3")}return h.dialog(t,{label:e,icon:c.OK,class:l.OK,callback:i},{onEscape:i||!0})},confirm:function(){var t="",e=s("CANCEL"),i=s("CONFIRM"),n=null;switch(arguments.length){case 1:t=arguments[0];break;case 2:t=arguments[0],"function"==typeof arguments[1]?n=arguments[1]:e=arguments[1];break;case 3:t=arguments[0],e=arguments[1],"function"==typeof arguments[2]?n=arguments[2]:i=arguments[2];break;case 4:t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];break;default:throw Error("Incorrect number of arguments: expected 1-4")}var r=function(){if("function"==typeof n)return n(!1)};return h.dialog(t,[{label:e,icon:c.CANCEL,class:l.CANCEL,callback:r},{label:i,icon:c.CONFIRM,class:l.CONFIRM,callback:function(){if("function"==typeof n)return n(!0)}}],{onEscape:r})},prompt:function(){var t="",i=s("CANCEL"),n=s("CONFIRM"),r=null,o="";switch(arguments.length){case 1:t=arguments[0];break;case 2:t=arguments[0],"function"==typeof arguments[1]?r=arguments[1]:i=arguments[1];break;case 3:t=arguments[0],i=arguments[1],"function"==typeof arguments[2]?r=arguments[2]:n=arguments[2];break;case 4:t=arguments[0],i=arguments[1],n=arguments[2],r=arguments[3];break;case 5:t=arguments[0],i=arguments[1],n=arguments[2],r=arguments[3],o=arguments[4];break;default:throw Error("Incorrect number of arguments: expected 1-5")}var a=e("<form></form>");a.append("<input autocomplete=off type=text value='"+o+"' />");o=function(){if("function"==typeof r)return r(null)};var u=h.dialog(a,[{label:i,icon:c.CANCEL,class:l.CANCEL,callback:o},{label:n,icon:c.CONFIRM,class:l.CONFIRM,callback:function(){if("function"==typeof r)return r(a.find("input[type=text]").val())}}],{header:t,show:!1,onEscape:o});return u.on("shown",function(){a.find("input[type=text]").focus(),a.on("submit",function(t){t.preventDefault(),u.find(".btn-primary").click()})}),u.modal("show"),u},dialog:function(s,i,n){function l(){var t=null;"function"==typeof n.onEscape&&(t=n.onEscape()),!1!==t&&_.modal("hide")}var c="",h=[];n||(n={}),void 0===i?i=[]:void 0===i.length&&(i=[i]);for(var u=i.length;u--;){var d=null,f=null,p=null,g="",v=null;if(void 0===i[u].label&&void 0===i[u].class&&void 0===i[u].callback){var m;d=0,f=null;for(m in i[u])if(f=m,1<++d)break;1==d&&"function"==typeof i[u][m]&&(i[u].label=f,i[u].callback=i[u][m])}"function"==typeof i[u].callback&&(v=i[u].callback),i[u].class?p=i[u].class:u==i.length-1&&2>=i.length&&(p="btn-primary"),d=i[u].label?i[u].label:"Option "+(u+1),i[u].icon&&(g="<i class='"+i[u].icon+"'></i> "),c="<a data-handler='"+u+"' class='btn "+p+"' href='"+(f=i[u].href?i[u].href:"javascript:;")+"'>"+g+d+"</a>"+c,h[u]=v}u=["<div class='bootbox modal' tabindex='-1' style='overflow:hidden;'>"],n.header&&(p="",(void 0===n.headerCloseButton||n.headerCloseButton)&&(p="<a href='javascript:;' class='close'>&times;</a>"),u.push("<div class='modal-header'>"+p+"<h3>"+n.header+"</h3></div>")),u.push("<div class='modal-body'></div>"),c&&u.push("<div class='modal-footer'>"+c+"</div>"),u.push("</div>");var _=e(u.join("\n"));return(void 0===n.animate?r:n.animate)&&_.addClass("fade"),(c=void 0===n.classes?a:n.classes)&&_.addClass(c),_.find(".modal-body").html(s),_.on("keyup.dismiss.modal",function(t){27===t.which&&n.onEscape&&l()}),_.on("click","a.close",function(t){t.preventDefault(),l()}),_.on("shown",function(){_.find("a.btn-primary:first").focus()}),_.on("hidden",function(){_.remove()}),_.on("click",".modal-footer a",function(t){var s=e(this).data("handler"),n=h[s],r=null;void 0!==s&&void 0!==i[s].href||(t.preventDefault(),"function"==typeof n&&(r=n()),!1!==r&&_.modal("hide"))}),e("body").append(_),_.modal({backdrop:void 0===n.backdrop?o:n.backdrop,keyboard:!1,show:!1}),_.on("show",function(){e(t).off("focusin.modal")}),(void 0===n.show||!0===n.show)&&_.modal("show"),_},modal:function(){var t,s,i,n={onEscape:null,keyboard:!0,backdrop:o};switch(arguments.length){case 1:t=arguments[0];break;case 2:t=arguments[0],"object"==typeof arguments[1]?i=arguments[1]:s=arguments[1];break;case 3:t=arguments[0],s=arguments[1],i=arguments[2];break;default:throw Error("Incorrect number of arguments: expected 1-3")}return n.header=s,i="object"==typeof i?e.extend(n,i):n,h.dialog(t,[],i)},hideAll:function(){e(".bootbox").modal("hide")},animate:function(t){r=t},backdrop:function(t){o=t},classes:function(t){a=t}},u={en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"},fr:{OK:"OK",CANCEL:"Annuler",CONFIRM:"D'accord"},de:{OK:"OK",CANCEL:"Abbrechen",CONFIRM:"Akzeptieren"},es:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Aceptar"},br:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Sim"},nl:{OK:"OK",CANCEL:"Annuleren",CONFIRM:"Accepteren"},ru:{OK:"OK",CANCEL:"Отмена",CONFIRM:"Применить"},it:{OK:"OK",CANCEL:"Annulla",CONFIRM:"Conferma"}};return h}(document,window.jQuery);window.bootbox=bootbox,function(t,e){function s(e){t.extend(!0,ut,e)}function i(s,i,c){function h(){i.theme?"ui":"fc",s.addClass("fc"),i.isRTL&&s.addClass("fc-rtl"),i.theme&&s.addClass("ui-widget"),R=t("<div class='fc-content' style='position:relative'/>").prependTo(s),O=new n(z,i),(N=O.render())&&s.prepend(N),g(i.defaultView),t(window).resize(S),p()||u()}function u(){setTimeout(function(){!F.start&&p()&&m()},0)}function f(){return 0!==K.offsetWidth}function p(){return 0!==t("body")[0].offsetWidth}function g(e){if(!F||e!=F.name){Y++,T();var s,i=F;i?((i.beforeHide||P)(),L(R,R.height()),i.element.hide()):L(R,1),R.css("overflow","hidden"),(F=U[e])?F.element.show():F=U[e]=new pt[e](s=j=t("<div class='fc-view fc-view-"+e+"' style='position:absolute'/>").appendTo(R),z),i&&O.deactivateButton(i.name),O.activateButton(e),m(),R.css("overflow",""),i&&L(R,1),s||(F.afterShow||P)(),Y--}}function m(t){if(f()){Y++,T(),I===e&&C();var i=!1;!F.start||t||G<F.start||G>=F.end?(F.render(G,t||0),x(!0),i=!0):F.sizeDirty?(F.clearEvents(),x(),i=!0):F.eventsDirty&&(F.clearEvents(),i=!0),F.sizeDirty=!1,F.eventsDirty=!1,k(i),H=s.outerWidth(),O.updateTitle(F.title);var n=new Date;n>=F.start&&n<F.end?O.disableButton("today"):O.enableButton("today"),Y--,F.trigger("viewDisplay",K)}}function _(){b(),f()&&(C(),x(),T(),F.clearEvents(),F.renderEvents(X),F.sizeDirty=!1)}function b(){t.each(U,function(t,e){e.sizeDirty=!0})}function C(){I=i.contentHeight?i.contentHeight:i.height?i.height-(N?N.height():0)-A(R):Math.round(R.width()/Math.max(i.aspectRatio,.5))}function x(t){Y++,F.setHeight(I,t),j&&(j.css("position","relative"),j=null),F.setWidth(R.width(),t),Y--}function S(){if(!Y)if(F.start){var t=++V;setTimeout(function(){t==V&&!Y&&f()&&H!=(H=s.outerWidth())&&(Y++,_(),F.trigger("windowResize",K),Y--)},200)}else u()}function k(t){!i.lazyFetching||q(F.visStart,F.visEnd)?D():t&&M()}function D(){B(F.visStart,F.visEnd)}function M(t){E(),f()&&(F.clearEvents(),F.renderEvents(X,t),F.eventsDirty=!1)}function E(){t.each(U,function(t,e){e.eventsDirty=!0})}function T(){F&&F.unselect()}var z=this;z.options=i,z.render=function(t){R?(C(),b(),E(),m(t)):h()},z.destroy=function(){t(window).unbind("resize",S),O.destroy(),R.remove(),s.removeClass("fc fc-rtl ui-widget")},z.refetchEvents=D,z.reportEvents=function(t){X=t,M()},z.reportEventChange=function(t){M(t)},z.rerenderEvents=M,z.changeView=g,z.select=function(t,s,i){F.select(t,s,i===e||i)},z.unselect=T,z.prev=function(){m(-1)},z.next=function(){m(1)},z.prevYear=function(){o(G,-1),m()},z.nextYear=function(){o(G,1),m()},z.today=function(){G=new Date,m()},z.gotoDate=function(t,e,s){t instanceof Date?G=d(t):v(G,t,e,s),m()},z.incrementDate=function(t,s,i){t!==e&&o(G,t),s!==e&&a(G,s),i!==e&&l(G,i),m()},z.formatDate=function(t,e){return y(t,e,i)},z.formatDates=function(t,e,s){return w(t,e,s,i)},z.getDate=function(){return d(G)},z.getView=function(){return F},z.option=function(t,s){if(s===e)return i[t];"height"!=t&&"contentHeight"!=t&&"aspectRatio"!=t||(i[t]=s,_())},z.trigger=function(t,e){if(i[t])return i[t].apply(e||K,Array.prototype.slice.call(arguments,2))},r.call(z,i,c);var O,N,R,F,H,I,j,W,q=z.isFetchNeeded,B=z.fetchEvents,K=s[0],U={},V=0,Y=0,G=new Date,X=[];v(G,i.year,i.month,i.date),i.droppable&&t(document).bind("dragstart",function(e,s){var n=e.target,r=t(n);if(!r.parents(".fc").length){var o=i.dropAccept;(t.isFunction(o)?o.call(n,r):r.is(o))&&(W=n,F.dragStart(W,e,s))}}).bind("dragstop",function(t,e){W&&(F.dragStop(W,t,e),W=null)})}function n(e,s){function i(i){var n=t("<td class='fc-header-"+i+"'/>"),o=s.header[i];return o&&t.each(o.split(" "),function(i){var o;i>0&&n.append("<span class='fc-header-space'/>"),t.each(this.split(","),function(i,a){var l;if("title"==a)n.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),o&&o.addClass(r+"-corner-right"),o=null;else if(e[a]?l=e[a]:pt[a]&&(l=function(){u.removeClass(r+"-state-hover"),e.changeView(a)}),l){var c=s.theme?B(s.buttonIcons,a):null,h=B(s.buttonText,a),u=t("<span class='fc-button fc-button-"+a+" "+r+"-state-default'><span class='fc-button-inner'><span class='fc-button-content'>"+(c?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+c+"'/></span>":h)+"</span><span class='fc-button-effect'><span></span></span></span></span>");u&&(u.click(function(){u.hasClass(r+"-state-disabled")||l()}).mousedown(function(){u.not("."+r+"-state-active").not("."+r+"-state-disabled").addClass(r+"-state-down")}).mouseup(function(){u.removeClass(r+"-state-down")}).hover(function(){u.not("."+r+"-state-active").not("."+r+"-state-disabled").addClass(r+"-state-hover")},function(){u.removeClass(r+"-state-hover").removeClass(r+"-state-down")}).appendTo(n),o||u.addClass(r+"-corner-left"),o=u)}}),o&&o.addClass(r+"-corner-right")}),n}var n=this;n.render=function(){if(r=s.theme?"ui":"fc",s.header)return o=t("<table class='fc-header' style='width:100%'/>").append(t("<tr/>").append(i("left")).append(i("center")).append(i("right")))},n.destroy=function(){o.remove()},n.updateTitle=function(t){o.find("h2").html(t)},n.activateButton=function(t){o.find("span.fc-button-"+t).addClass(r+"-state-active")},n.deactivateButton=function(t){o.find("span.fc-button-"+t).removeClass(r+"-state-active")},n.disableButton=function(t){o.find("span.fc-button-"+t).addClass(r+"-state-disabled")},n.enableButton=function(t){o.find("span.fc-button-"+t).removeClass(r+"-state-disabled")};var r,o=t([])}function r(s,i){function n(t,e){r(t,function(s){if(e==C){if(s){for(var i=0;i<s.length;i++)s[i].source=t,c(s[i]);k=k.concat(s)}--x||b(k)}})}function r(e,i){var n,o,c=ft.sourceFetchers;for(n=0;n<c.length;n++){if(!0===(o=c[n](e,p,g,i)))return;if("object"==typeof o)return void r(o,i)}var h=e.events;if(h)t.isFunction(h)?(a(),h(d(p),d(g),function(t){i(t),l()})):t.isArray(h)?i(h):i();else if(e.url){var u=e.success,f=e.error,v=e.complete,m=t.extend({},e.data||{}),_=J(e.startParam,s.startParam),b=J(e.endParam,s.endParam);_&&(m[_]=Math.round(+p/1e3)),b&&(m[b]=Math.round(+g/1e3)),a(),t.ajax(t.extend({},gt,e,{data:m,success:function(e){e=e||[];var s=$(u,this,arguments);t.isArray(s)&&(e=s),i(e)},error:function(){$(f,this,arguments),i()},complete:function(){$(v,this,arguments),l()}}))}else i()}function o(e){if(t.isFunction(e)||t.isArray(e)?e={events:e}:"string"==typeof e&&(e={url:e}),"object"==typeof e)return function(t){t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[];for(var e=ft.sourceNormalizers,s=0;s<e.length;s++)e[s](t)}(e),w.push(e),e}function a(){S++||v("loading",null,!0)}function l(){--S||v("loading",null,!1)}function c(t){var i=t.source||{},n=J(i.ignoreTimezone,s.ignoreTimezone);t._id=t._id||(t.id===e?"_fc"+vt++:t.id+""),t.date&&(t.start||(t.start=t.date),delete t.date),t._start=d(t.start=m(t.start,n)),t.end=m(t.end,n),t.end&&t.end<=t.start&&(t.end=null),t._end=t.end?d(t.end):null,t.allDay===e&&(t.allDay=J(i.allDayDefault,s.allDayDefault)),t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[]}function h(t,e){return t&&e&&u(t)==u(e)}function u(t){return("object"==typeof t?t.events||t.url:"")||t}var f=this;f.isFetchNeeded=function(t,e){return!p||t<p||e>g},f.fetchEvents=function(t,e){p=t,g=e,k=[];var s=++C,i=w.length;x=i;for(var r=0;r<i;r++)n(w[r],s)},f.addEventSource=function(t){(t=o(t))&&(x++,n(t,C))},f.removeEventSource=function(e){w=t.grep(w,function(t){return!h(t,e)}),k=t.grep(k,function(t){return!h(t.source,e)}),b(k)},f.updateEvent=function(t){var e,s,i=k.length,n=_().defaultEventEnd,r=t.start-t._start,o=t.end?t.end-(t._end||n(t)):0;for(e=0;e<i;e++)(s=k[e])._id==t._id&&s!=t&&(s.start=new Date(+s.start+r),t.end?s.end?s.end=new Date(+s.end+o):s.end=new Date(+n(s)+o):s.end=null,s.title=t.title,s.url=t.url,s.allDay=t.allDay,s.className=t.className,s.editable=t.editable,s.color=t.color,s.backgroudColor=t.backgroudColor,s.borderColor=t.borderColor,s.textColor=t.textColor,c(s));c(t),b(k)},f.renderEvent=function(t,e){c(t),t.source||(e&&(y.events.push(t),t.source=y),k.push(t)),b(k)},f.removeEvents=function(e){if(e){if(!t.isFunction(e)){var s=e+"";e=function(t){return t._id==s}}for(k=t.grep(k,e,!0),i=0;i<w.length;i++)t.isArray(w[i].events)&&(w[i].events=t.grep(w[i].events,e,!0))}else{k=[];for(var i=0;i<w.length;i++)t.isArray(w[i].events)&&(w[i].events=[])}b(k)},f.clientEvents=function(e){return t.isFunction(e)?t.grep(k,e):e?(e+="",t.grep(k,function(t){return t._id==e})):k},f.normalizeEvent=c;for(var p,g,v=f.trigger,_=f.getView,b=f.reportEvents,y={events:[]},w=[y],C=0,x=0,S=0,k=[],D=0;D<i.length;D++)o(i[D])}function o(t,e,s){return t.setFullYear(t.getFullYear()+e),s||u(t),t}function a(t,e,s){if(+t){var i=t.getMonth()+e,n=d(t);for(n.setDate(1),n.setMonth(i),t.setMonth(i),s||u(t);t.getMonth()!=n.getMonth();)t.setDate(t.getDate()+(t<n?1:-1))}return t}function l(t,e,s){if(+t){var i=t.getDate()+e,n=d(t);n.setHours(9),n.setDate(i),t.setDate(i),s||u(t),c(t,n)}return t}function c(t,e){if(+t)for(;t.getDate()!=e.getDate();)t.setTime(+t+(t<e?1:-1)*bt)}function h(t,e){return t.setMinutes(t.getMinutes()+e),t}function u(t){return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t}function d(t,e){return e?u(new Date(+t)):new Date(+t)}function f(){var t,e=0;do{t=new Date(1970,e++,1)}while(t.getHours());return t}function p(t,e,s){for(e=e||1;!t.getDay()||s&&1==t.getDay()||!s&&6==t.getDay();)l(t,e);return t}function g(t,e){return Math.round((d(t,!0)-d(e,!0))/_t)}function v(t,s,i,n){s!==e&&s!=t.getFullYear()&&(t.setDate(1),t.setMonth(0),t.setFullYear(s)),i!==e&&i!=t.getMonth()&&(t.setDate(1),t.setMonth(i)),n!==e&&t.setDate(n)}function m(t,s){return"object"==typeof t?t:"number"==typeof t?new Date(1e3*t):"string"==typeof t?t.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(t)):(s===e&&(s=!0),_(t,s)||(t?new Date(t):null)):null}function _(t,e){var s=t.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!s)return null;var i=new Date(s[1],0,1);if(e||!s[13]){var n=new Date(s[1],0,1,9,0);s[3]&&(i.setMonth(s[3]-1),n.setMonth(s[3]-1)),s[5]&&(i.setDate(s[5]),n.setDate(s[5])),c(i,n),s[7]&&i.setHours(s[7]),s[8]&&i.setMinutes(s[8]),s[10]&&i.setSeconds(s[10]),s[12]&&i.setMilliseconds(1e3*Number("0."+s[12])),c(i,n)}else if(i.setUTCFullYear(s[1],s[3]?s[3]-1:0,s[5]||1),i.setUTCHours(s[7]||0,s[8]||0,s[10]||0,s[12]?1e3*Number("0."+s[12]):0),s[14]){var r=60*Number(s[16])+(s[18]?Number(s[18]):0);r*="-"==s[15]?1:-1,i=new Date(+i+60*r*1e3)}return i}function b(t){if("number"==typeof t)return 60*t;if("object"==typeof t)return 60*t.getHours()+t.getMinutes();var e=t.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(e){var s=parseInt(e[1],10);return e[3]&&(s%=12,"p"==e[3].toLowerCase().charAt(0)&&(s+=12)),60*s+(e[2]?parseInt(e[2],10):0)}}function y(t,e,s){return w(t,null,e,s)}function w(t,e,s,i){i=i||ut;var n,r,o,a,l=t,c=e,h=s.length,u="";for(n=0;n<h;n++)if("'"==(r=s.charAt(n))){for(o=n+1;o<h;o++)if("'"==s.charAt(o)){l&&(u+=o==n+1?"'":s.substring(n+1,o),n=o);break}}else if("("==r){for(o=n+1;o<h;o++)if(")"==s.charAt(o)){var d=y(l,s.substring(n+1,o),i);parseInt(d.replace(/\D/,""),10)&&(u+=d),n=o;break}}else if("["==r){for(o=n+1;o<h;o++)if("]"==s.charAt(o)){var f=s.substring(n+1,o);(d=y(l,f,i))!=y(c,f,i)&&(u+=d),n=o;break}}else if("{"==r)l=e,c=t;else if("}"==r)l=t,c=e;else{for(o=h;o>n;o--)if(a=wt[s.substring(n,o)]){l&&(u+=a(l,i)),n=o-1;break}o==n&&l&&(u+=r)}return u}function C(t){return t.end?function(t,e){return t=d(t),e||t.getHours()||t.getMinutes()?l(t,1):u(t)}(t.end,t.allDay):l(d(t.start),1)}function x(t,e){return 100*(e.msLength-t.msLength)+(t.event.start-e.event.start)}function S(t,e){return t.end>e.start&&t.start<e.end}function k(t,e,s,i){var n,r,o,a,l,c,h,u,f=[],p=t.length;for(n=0;n<p;n++)o=(r=t[n]).start,(a=e[n])>s&&o<i&&(o<s?(l=d(s),h=!1):(l=o,h=!0),a>i?(c=d(i),u=!1):(c=a,u=!0),f.push({event:r,start:l,end:c,isStart:h,isEnd:u,msLength:c-l}));return f.sort(x)}function D(t){var e,s,i,n,r,o=[],a=t.length;for(e=0;e<a;e++){for(s=t[e],i=0;;){if(n=!1,o[i])for(r=0;r<o[i].length;r++)if(S(o[i][r],s)){n=!0;break}if(!n)break;i++}o[i]?o[i].push(s):o[i]=[s]}return o}function M(s,i,n){s.unbind("mouseover").mouseover(function(s){for(var r,o,a,l=s.target;l!=this;)r=l,l=l.parentNode;(o=r._fci)!==e&&(r._fci=e,a=i[o],n(a.event,a.element,a),t(s.target).trigger(s)),s.stopPropagation()})}function E(e,s,i){for(var n,r=0;r<e.length;r++)(n=t(e[r])).width(Math.max(0,s-z(n,i)))}function T(e,s,i){for(var n,r=0;r<e.length;r++)(n=t(e[r])).height(Math.max(0,s-A(n,i)))}function z(t,e){return O(t)+R(t)+(e?N(t):0)}function O(e){return(parseFloat(t.css(e[0],"paddingLeft",!0))||0)+(parseFloat(t.css(e[0],"paddingRight",!0))||0)}function N(e){return(parseFloat(t.css(e[0],"marginLeft",!0))||0)+(parseFloat(t.css(e[0],"marginRight",!0))||0)}function R(e){return(parseFloat(t.css(e[0],"borderLeftWidth",!0))||0)+(parseFloat(t.css(e[0],"borderRightWidth",!0))||0)}function A(t,e){return F(t)+I(t)+(e?H(t):0)}function F(e){return(parseFloat(t.css(e[0],"paddingTop",!0))||0)+(parseFloat(t.css(e[0],"paddingBottom",!0))||0)}function H(e){return(parseFloat(t.css(e[0],"marginTop",!0))||0)+(parseFloat(t.css(e[0],"marginBottom",!0))||0)}function I(e){return(parseFloat(t.css(e[0],"borderTopWidth",!0))||0)+(parseFloat(t.css(e[0],"borderBottomWidth",!0))||0)}function L(t,e){e="number"==typeof e?e+"px":e,t.each(function(t,s){s.style.cssText+=";min-height:"+e+";_height:"+e})}function P(){}function j(t,e){return t-e}function W(t){return Math.max.apply(Math,t)}function q(t){return(t<10?"0":"")+t}function B(t,s){if(t[s]!==e)return t[s];for(var i,n=s.split(/(?=[A-Z])/),r=n.length-1;r>=0;r--)if((i=t[n[r].toLowerCase()])!==e)return i;return t[""]}function K(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function U(t){return t.id+"/"+t.className+"/"+t.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/gi,"")}function V(t){t.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function Y(t){t.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function G(t,e){t.each(function(t,s){s.className=s.className.replace(/^fc-\w*/,"fc-"+mt[e.getDay()])})}function X(t,e){var s=t.source||{},i=t.color,n=s.color,r=e("eventColor"),o=t.backgroundColor||i||s.backgroundColor||n||e("eventBackgroundColor")||r,a=t.borderColor||i||s.borderColor||n||e("eventBorderColor")||r,l=t.textColor||s.textColor||e("eventTextColor"),c=[];return o&&c.push("background-color:"+o),a&&c.push("border-color:"+a),l&&c.push("color:"+l),c.join(";")}function $(e,s,i){if(t.isFunction(e)&&(e=[e]),e){var n,r;for(n=0;n<e.length;n++)r=e[n].apply(s,i)||r;return r}}function J(){for(var t=0;t<arguments.length;t++)if(arguments[t]!==e)return arguments[t]}function Q(e,s,i){function n(s,i){var n,r,a,l,c=B+"-widget-header",h=B+"-widget-content";for(n="<table class='fc-border-separate' style='width:100%' cellspacing='0'><thead><tr>",r=0;r<N;r++)n+="<th class='fc- "+c+"'/>";for(n+="</tr></thead><tbody>",r=0;r<s;r++){for(n+="<tr class='fc-week"+r+"'>",a=0;a<N;a++)n+="<td class='fc- "+h+" fc-day"+(r*N+a)+"'><div>"+(i?"<div class='fc-day-number'/>":"")+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";n+="</tr>"}l=t(n+="</tbody></table>").appendTo(e),y=l.find("thead"),w=y.find("th"),C=l.find("tbody"),x=C.find("tr"),S=C.find("td"),k=S.filter(":first-child"),D=x.eq(0).find("div.fc-day-content div"),Y(y.add(y.find("tr"))),Y(x),x.eq(0).addClass("fc-first"),o(S),M=t("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(e)}function r(e){var s,i,n,r=e||1==O,o=b.start.getMonth(),a=u(new Date);r&&w.each(function(e,n){s=t(n),i=m(e),s.html(et(i,K)),G(s,i)}),S.each(function(e,n){s=t(n),(i=m(e)).getMonth()==o?s.removeClass("fc-other-month"):s.addClass("fc-other-month"),+i==+a?s.addClass(B+"-state-highlight fc-today"):s.removeClass(B+"-state-highlight fc-today"),s.find("div.fc-day-number").text(i.getDate()),r&&G(s,i)}),x.each(function(e,s){n=t(s),e<O?(n.show(),e==O-1?n.addClass("fc-last"):n.removeClass("fc-last")):n.hide()})}function o(t){t.click(a).mousedown(tt)}function a(t){if(!U("selectable")){var e=m(parseInt(this.className.match(/fc\-day(\d+)/)[1]));X("dayClick",this,e,!0,t)}}function c(t,e,s){s&&R.build();for(var i=d(b.visStart),n=l(d(i),N),r=0;r<O;r++){var a,c,u=new Date(Math.max(i,t)),f=new Date(Math.min(n,e));if(u<f)I?(a=g(f,i)*P+j+1,c=g(u,i)*P+j+1):(a=g(u,i),c=g(f,i)),o(h(r,a,r,c-1));l(i,7),l(n,7)}}function h(t,s,i,n){var r=R.rect(t,s,i,n,e);return J(r,e)}function f(t){return{row:Math.floor(g(t,b.visStart)/7),col:_(t.getDay())}}function p(t){return v(t.row,t.col)}function v(t,e){return l(d(b.visStart),7*t+e*P+j)}function m(t){return v(Math.floor(t/N),t%N)}function _(t){return(t-Math.max(W,q)+N)%N*P+j}var b=this;b.renderBasic=function(t,e,s,i){O=e,N=s,(I=U("isRTL"))?(P=-1,j=N-1):(P=1,j=0),W=U("firstDay"),q=U("weekends")?0:1,B=U("theme")?"ui":"fc",K=U("columnFormat");var o=!C;o?n(t,i):$(),r(o)},b.setHeight=function(e){var s,i,n,r=e-y.height();"variable"==U("weekMode")?s=i=Math.floor(r/(1==O?2:6)):(s=Math.floor(r/O),i=r-s*(O-1)),k.each(function(e,r){e<O&&L((n=t(r)).find("> div"),(e==O-1?i:s)-A(n))})},b.setWidth=function(t){T=t,H.clear(),z=Math.floor(T/N),E(w.slice(0,-1),z)},b.renderDayOverlay=c,b.defaultSelectionEnd=function(t,e){return d(t)},b.renderSelection=function(t,e,s){c(t,l(d(e),1),!0)},b.clearSelection=function(){Q()},b.reportDayClick=function(t,e,s){var i=f(t),n=S[i.row*N+i.col];X("dayClick",n,t,e,s)},b.dragStart=function(t,e,s){F.start(function(t){Q(),t&&h(t.row,t.col,t.row,t.col)},e)},b.dragStop=function(t,e,s){var i=F.stop();if(Q(),i){var n=p(i);X("drop",t,n,!0,e,s)}},b.defaultEventEnd=function(t){return d(t.start)},b.getHoverListener=function(){return F},b.colContentLeft=function(t){return H.left(t)},b.colContentRight=function(t){return H.right(t)},b.dayOfWeekCol=_,b.dateCell=f,b.cellDate=p,b.cellIsAllDay=function(){return!0},b.allDayRow=function(t){return x.eq(t)},b.allDayBounds=function(t){return{left:0,right:T}},b.getRowCnt=function(){return O},b.getColCnt=function(){return N},b.getColWidth=function(){return z},b.getDaySegmentContainer=function(){return M},it.call(b,e,s,i),ot.call(b),rt.call(b),Z.call(b);var y,w,C,x,S,k,D,M,T,z,O,N,R,F,H,I,P,j,W,q,B,K,U=b.opt,X=b.trigger,$=b.clearEvents,J=b.renderOverlay,Q=b.clearOverlays,tt=b.daySelectionMousedown,et=s.formatDate;V(e.addClass("fc-grid")),R=new at(function(e,s){var i,n,r;w.each(function(e,o){i=t(o),n=i.offset().left,e&&(r[1]=n),r=[n],s[e]=r}),r[1]=n+i.outerWidth(),x.each(function(s,o){s<O&&(i=t(o),n=i.offset().top,s&&(r[1]=n),r=[n],e[s]=r)}),r[1]=n+i.outerHeight()}),F=new lt(R),H=new ht(function(t){return D.eq(t)})}function Z(){function e(e){var s,n,r,o,a,c,h=y(),u=w(),f=d(i.visStart),p=l(d(f),u),g=t.map(e,C),v=[];for(s=0;s<h;s++){for(n=D(k(e,g,f,p)),r=0;r<n.length;r++)for(o=n[r],a=0;a<o.length;a++)(c=o[a]).row=s,c.level=r,v.push(c);l(f,7),l(p,7)}return v}function s(t,e){var s,i=m();e.draggable({zIndex:9,delay:50,opacity:n("dragOpacity"),revertDuration:n("dragRevertDuration"),start:function(o,a){r("eventDragStart",e,t,o,a),p(t,e),i.start(function(i,r,o,a){e.draggable("option","revert",!i||!o&&!a),b(),i?(s=7*o+a*(n("isRTL")?-1:1),_(l(d(t.start),s),l(C(t),s))):s=0},o,"drag")},stop:function(n,o){i.stop(),b(),r("eventDragStop",e,t,n,o),s?g(this,t,s,0,t.allDay,n,o):(e.css("filter",""),f(t,e))}})}var i=this;i.renderEvents=function(t,s){c(t),x(e(t),s)},i.compileDaySegs=e,i.clearEvents=function(){h(),v().empty()},i.bindDaySeg=function(t,e,i){o(t)&&s(t,e),i.isEnd&&a(t)&&S(t,e,i),u(t,e)},nt.call(i);var n=i.opt,r=i.trigger,o=i.isEventDraggable,a=i.isEventResizable,c=i.reportEvents,h=i.reportEventClear,u=i.eventElementHandlers,f=i.showEvents,p=i.hideEvents,g=i.eventDrop,v=i.getDaySegmentContainer,m=i.getHoverListener,_=i.renderDayOverlay,b=i.clearOverlays,y=i.getRowCnt,w=i.getColCnt,x=i.renderDaySegs,S=i.resizableDayEvent}function tt(s,i,n){function r(){var e,i,n,r,l,c=wt+"-widget-header",u=wt+"-widget-content",p=zt("slotMinutes")%15==0;for(e="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'><thead><tr><th class='fc-agenda-axis "+c+"'>&nbsp;</th>",i=0;i<vt;i++)e+="<th class='fc- fc-col"+i+" "+c+"'/>";for(e+="<th class='fc-agenda-gutter "+c+"'>&nbsp;</th></tr></thead><tbody><tr><th class='fc-agenda-axis "+c+"'>&nbsp;</th>",i=0;i<vt;i++)e+="<td class='fc- fc-col"+i+" "+u+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";for(O=t(e+="<td class='fc-agenda-gutter "+u+"'>&nbsp;</td></tr></tbody></table>").appendTo(s),N=O.find("thead"),R=N.find("th").slice(1,-1),F=O.find("tbody"),H=F.find("td").slice(0,-1),I=H.find("div.fc-day-content div"),L=H.eq(0),P=L.find("> div"),Y(N.add(N.find("tr"))),Y(F.add(F.find("tr"))),Z=N.find("th:first"),tt=O.find(".fc-agenda-gutter"),W=t("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(s),zt("allDaySlot")?(q=t("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(W),e="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+c+" fc-agenda-axis'>"+zt("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+c+" fc-agenda-gutter'>&nbsp;</th></tr></table>",B=t(e).appendTo(W),o((K=B.find("tr")).find("td")),Z=Z.add(B.find("th:first")),tt=tt.add(B.find("th.fc-agenda-gutter")),W.append("<div class='fc-agenda-divider "+c+"'><div class='fc-agenda-divider-inner'/></div>")):q=t([]),U=t("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(W),X=t("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(U),$=t("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(X),e="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",r=h(d(n=f()),Et),h(n,Mt),mt=0,i=0;n<r;i++)e+="<tr class='fc-slot"+i+" "+((l=n.getMinutes())?"fc-minor":"")+"'><th class='fc-agenda-axis "+c+"'>"+(p&&l?"&nbsp;":Pt(n,zt("axisFormat")))+"</th><td class='"+u+"'><div style='position:relative'>&nbsp;</div></td></tr>",h(n,zt("slotMinutes")),mt++;J=t(e+="</tbody></table>").appendTo(X),Q=J.find("div:first"),a(J.find("td")),Z=Z.add(J.find("th:first"))}function o(t){t.click(c).mousedown(It)}function a(t){t.click(c).mousedown(D)}function c(t){if(!zt("selectable")){var e=Math.min(vt-1,Math.floor((t.pageX-O.offset().left-ut)/dt)),s=y(e),i=this.parentNode.className.match(/fc-slot(\d+)/);if(i){var n=parseInt(i[1])*zt("slotMinutes"),r=Math.floor(n/60);s.setHours(r),s.setMinutes(n%60+Mt),Ot("dayClick",H[e],s,!1,t)}else Ot("dayClick",H[e],s,!0,t)}}function p(t,e,s){s&&_t.build();var i,n,r=d(z.visStart);St?(i=g(e,r)*kt+Dt+1,n=g(t,r)*kt+Dt+1):(i=g(t,r),n=g(e,r)),(i=Math.max(0,i))<(n=Math.min(vt,n))&&o(v(0,i,0,n-1))}function v(t,e,s,i){var n=_t.rect(t,e,s,i,W);return Rt(n,W)}function m(t,e){for(var s=d(z.visStart),i=l(d(s),1),n=0;n<vt;n++){var r=new Date(Math.max(s,t)),o=new Date(Math.min(i,e));if(r<o){var c=n*kt+Dt,h=_t.rect(0,c,0,c,X),u=x(s,r),f=x(s,o);h.top=u,h.height=f-u,a(Rt(h,X))}l(s,1),l(i,1)}}function _(t){var e=y(t.col),s=t.row;return zt("allDaySlot")&&s--,s>=0&&h(e,Mt+s*zt("slotMinutes")),e}function y(t){return l(d(z.visStart),t*kt+Dt)}function w(t){return zt("allDaySlot")&&!t.row}function C(t){return(t-Math.max(Ct,xt)+vt)%vt*kt+Dt}function x(t,s){if(t=d(t,!0),s<h(d(t),Mt))return 0;if(s>=h(d(t),Et))return J.height();var i=zt("slotMinutes"),n=60*s.getHours()+s.getMinutes()-Mt,r=Math.floor(n/i),o=jt[r];return o===e&&(o=jt[r]=J.find("tr:eq("+r+") td div")[0].offsetTop),Math.max(0,Math.round(o-1+pt*(n%i/i)))}function S(e,s){var i=zt("selectHelper");if(_t.build(),i){var n=g(e,z.visStart)*kt+Dt;if(n>=0&&n<vt){var r=_t.rect(0,n,0,n,X),o=x(e,e),l=x(e,s);if(l>o){if(r.top=o,r.height=l-o,r.left+=2,r.width-=5,t.isFunction(i)){var c=i(e,s);c&&(r.position="absolute",r.zIndex=8,st=t(c).css(r).appendTo(X))}else r.isStart=!0,r.isEnd=!0,(st=t(Lt({title:"",start:e,end:s,className:["fc-select-helper"],editable:!1},r))).css("opacity",zt("dragOpacity"));st&&(a(st),X.append(st),E(st,r.width,!0),T(st,r.height,!0))}}}else m(e,s)}function k(){At(),st&&(st.remove(),st=null)}function D(e){var s;1==e.which&&zt("selectable")&&(Ht(e),bt.start(function(t,e){if(k(),t&&t.col==e.col&&!w(t)){var i=_(e),n=_(t);S((s=[i,h(d(i),zt("slotMinutes")),n,h(d(n),zt("slotMinutes"))].sort(j))[0],s[3])}else s=null},e),t(document).one("mouseup",function(t){bt.stop(),s&&(+s[0]==+s[1]&&M(s[0],!1,t),Ft(s[0],s[3],!1,t))}))}function M(t,e,s){Ot("dayClick",H[C(t.getDay())],t,e,s)}var z=this;z.renderAgenda=function(t){vt=t,wt=zt("theme")?"ui":"fc",xt=zt("weekends")?0:1,Ct=zt("firstDay"),(St=zt("isRTL"))?(kt=-1,Dt=vt-1):(kt=1,Dt=0),Mt=b(zt("minTime")),Et=b(zt("maxTime")),Tt=zt("columnFormat"),O?Nt():r(),function(){var t,e,s,i,n=u(new Date);for(t=0;t<vt;t++)i=y(t),(e=R.eq(t)).html(Pt(i,Tt)),s=H.eq(t),+i==+n?s.addClass(wt+"-state-highlight fc-today"):s.removeClass(wt+"-state-highlight fc-today"),G(e.add(s),i)}()},z.setWidth=function(e){nt=e,yt.clear(),ut=0,E(Z.width("").each(function(e,s){ut=Math.max(ut,t(s).outerWidth())}),ut);var s=U[0].clientWidth;(ft=U.width()-s)?(E(tt,ft),tt.show().prev().removeClass("fc-last")):tt.hide().prev().addClass("fc-last"),dt=Math.floor((s-ut)/vt),E(R.slice(0,-1),dt)},z.setHeight=function(t,s){t===e&&(t=ct),ct=t,jt={};var i=F.position().top,n=U.position().top,r=Math.min(t-i,J.height()+n+1);P.height(r-A(L)),W.css("top",i),U.height(r-n-1),pt=Q.height()+1,s&&function(){function t(){U.scrollTop(i)}var e=f(),s=d(e);s.setHours(zt("firstHour"));var i=x(e,s)+1;t(),setTimeout(t,0)}()},z.beforeHide=function(){gt=U.scrollTop()},z.afterShow=function(){U.scrollTop(gt)},z.defaultEventEnd=function(t){var e=d(t.start);return t.allDay?e:h(e,zt("defaultEventMinutes"))},z.timePosition=x,z.dayOfWeekCol=C,z.dateCell=function(t){return{row:Math.floor(g(t,z.visStart)/7),col:C(t.getDay())}},z.cellDate=_,z.cellIsAllDay=w,z.allDayRow=function(t){return K},z.allDayBounds=function(){return{left:ut,right:nt-ft}},z.getHoverListener=function(){return bt},z.colContentLeft=function(t){return yt.left(t)},z.colContentRight=function(t){return yt.right(t)},z.getDaySegmentContainer=function(){return q},z.getSlotSegmentContainer=function(){return $},z.getMinMinute=function(){return Mt},z.getMaxMinute=function(){return Et},z.getBodyContent=function(){return X},z.getRowCnt=function(){return 1},z.getColCnt=function(){return vt},z.getColWidth=function(){return dt},z.getSlotHeight=function(){return pt},z.defaultSelectionEnd=function(t,e){return e?d(t):h(d(t),zt("slotMinutes"))},z.renderDayOverlay=p,z.renderSelection=function(t,e,s){s?zt("allDaySlot")&&p(t,l(d(e),1),!0):S(t,e)},z.clearSelection=k,z.reportDayClick=M,z.dragStart=function(t,e,s){bt.start(function(t){if(At(),t)if(w(t))v(t.row,t.col,t.row,t.col);else{var e=_(t);m(e,h(d(e),zt("defaultEventMinutes")))}},e)},z.dragStop=function(t,e,s){var i=bt.stop();At(),i&&Ot("drop",t,_(i),w(i),e,s)},it.call(z,s,i,n),ot.call(z),rt.call(z),et.call(z);var O,N,R,F,H,I,L,P,W,q,B,K,U,X,$,J,Q,Z,tt,st,nt,ct,ut,dt,ft,pt,gt,vt,mt,_t,bt,yt,wt,Ct,xt,St,kt,Dt,Mt,Et,Tt,zt=z.opt,Ot=z.trigger,Nt=z.clearEvents,Rt=z.renderOverlay,At=z.clearOverlays,Ft=z.reportSelection,Ht=z.unselect,It=z.daySelectionMousedown,Lt=z.slotSegHtml,Pt=i.formatDate,jt={};V(s.addClass("fc-agenda")),_t=new at(function(e,s){function i(t){return Math.max(l,Math.min(c,t))}var n,r,o;R.each(function(e,i){n=t(i),r=n.offset().left,e&&(o[1]=r),o=[r],s[e]=o}),o[1]=r+n.outerWidth(),zt("allDaySlot")&&(r=(n=K).offset().top,e[0]=[r,r+n.outerHeight()]);for(var a=X.offset().top,l=U.offset().top,c=l+U.outerHeight(),h=0;h<mt;h++)e.push([i(a+pt*h),i(a+pt*(h+1))])}),bt=new lt(_t),yt=new ht(function(t){return I.eq(t)})}function et(){function s(e){var s,i,n,r,o=D(k(e,t.map(e,C),f.visStart,f.visEnd)),a=o.length,l=[];for(s=0;s<a;s++)for(i=o[s],n=0;n<i.length;n++)(r=i[n]).row=0,r.level=s,l.push(r);return l}function i(e){var s,i,r,o,a,c,u=j(),p=R(),g=N(),v=h(d(f.visStart),p),m=t.map(e,n),_=[];for(s=0;s<u;s++){for(st(i=D(k(e,m,v,h(d(v),g-p)))),r=0;r<i.length;r++)for(o=i[r],a=0;a<o.length;a++)(c=o[a]).col=s,c.level=r,_.push(c);l(v,1,!0)}return _}function n(t){return t.end?d(t.end):h(d(t.start),p("defaultEventMinutes"))}function r(s,i){var n,r,l,c,h,u,d,f,v,m,_,b,y,w,C,x,S,k,D,T,O,N,R=s.length,L="",P={},W={},q=E(),B=j();for((T=p("isRTL"))?(O=-1,N=B-1):(O=1,N=0),n=0;n<R;n++)l=(r=s[n]).event,c=F(r.start,r.start),h=F(r.start,r.end),u=r.col,d=r.level,f=r.forward||0,v=H(u*O+N),m=I(u*O+N)-v,m=Math.min(m-6,.95*m),_=d?m/(d+f+1):f?2*(m/(f+1)-6):m,b=v+m/(d+f+1)*d*O+(T?m-_:0),r.top=c,r.left=b,r.outerWidth=_,r.outerHeight=h-c,L+=o(l,r);for(q[0].innerHTML=L,y=q.children(),n=0;n<R;n++)l=(r=s[n]).event,w=t(y[n]),!1===(C=g("eventRender",l,l,w))?w.remove():(C&&!0!==C&&(w.remove(),w=t(C).css({position:"absolute",top:r.top,left:r.left}).appendTo(q)),r.element=w,l._id===i?a(l,w,r):w[0]._fci=n,V(l,w));for(M(q,s,a),n=0;n<R;n++)(w=(r=s[n]).element)&&(S=P[x=r.key=U(w[0])],r.vsides=S===e?P[x]=A(w,!0):S,S=W[x],r.hsides=S===e?W[x]=z(w,!0):S,(k=w.find("div.fc-event-content")).length&&(r.contentTop=k[0].offsetTop));for(n=0;n<R;n++)(w=(r=s[n]).element)&&(w[0].style.width=Math.max(0,r.outerWidth-r.hsides)+"px",D=Math.max(0,r.outerHeight-r.vsides),w[0].style.height=D+"px",l=r.event,r.contentTop!==e&&D-r.contentTop<10&&(w.find("div.fc-event-time").text(et(l.start,p("timeFormat"))+" - "+l.title),w.find("div.fc-event-title").remove()),g("eventAfterRender",l,l,w))}function o(t,e){var s="<",i=t.url,n=X(t,p),r=n?" style='"+n+"'":"",o=["fc-event","fc-event-skin","fc-event-vert"];return v(t)&&o.push("fc-event-draggable"),e.isStart&&o.push("fc-corner-top"),e.isEnd&&o.push("fc-corner-bottom"),o=o.concat(t.className),t.source&&(o=o.concat(t.source.className||[])),s+=i?"a href='"+K(t.url)+"'":"div",s+=" class='"+o.join(" ")+"' style='position:absolute;z-index:8;top:"+e.top+"px;left:"+e.left+"px;"+n+"'><div class='fc-event-inner fc-event-skin'"+r+"><div class='fc-event-head fc-event-skin'"+r+"><div class='fc-event-time'>"+K(it(t.start,t.end,p("timeFormat")))+"</div></div><div class='fc-event-content'><div class='fc-event-title'>"+K(t.title)+"</div></div><div class='fc-event-bg'></div></div>",e.isEnd&&m(t)&&(s+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),s+="</"+(i?"a":"div")+">"}function a(t,e,s){var i=e.find("div.fc-event-time");v(t)&&c(t,e,i),s.isEnd&&m(t)&&u(t,e,i),w(t,e)}function c(t,e,s){function i(e){var i,n=h(d(t.start),e);t.end&&(i=h(d(t.end),e)),s.text(it(n,i,p("timeFormat")))}function n(){u&&(s.css("display",""),e.draggable("option","grid",[_,b]),u=!1)}var r,o,a,c,u=!1,f=p("isRTL")?-1:1,v=O(),m=j(),_=W(),b=q();e.draggable({zIndex:9,scroll:!1,grid:[_,b],axis:1==m&&"y",opacity:p("dragOpacity"),revertDuration:p("dragRevertDuration"),start:function(i,h){g("eventDragStart",e,t,i,h),G(t,e),r=e.position(),a=c=0,v.start(function(i,r,a,c){e.draggable("option","revert",!i),Z(),i&&(o=c*f,p("allDaySlot")&&!i.row?(u||(u=!0,s.hide(),e.draggable("option","grid",null)),Q(l(d(t.start),o),l(C(t),o))):n())},i,"drag")},drag:function(t,e){(a=Math.round((e.position.top-r.top)/b)*p("slotMinutes"))!=c&&(u||i(a),c=a)},stop:function(s,l){var c=v.stop();Z(),g("eventDragStop",e,t,s,l),c&&(o||a||u)?$(this,t,o,u?0:a,u,s,l):(n(),e.css("filter",""),e.css(r),i(0),Y(t,e))}})}function u(t,e,s){var i,n,r=q();e.resizable({handles:{s:"div.ui-resizable-s"},grid:r,start:function(s,r){i=n=0,G(t,e),e.css("z-index",9),g("eventResizeStart",this,t,s,r)},resize:function(o,a){(i=Math.round((Math.max(r,e.height())-a.originalSize.height)/r))!=n&&(s.text(it(t.start,i||t.end?h(_(t),p("slotMinutes")*i):null,p("timeFormat"))),n=i)},stop:function(s,n){g("eventResizeStop",this,t,s,n),i?J(this,t,0,p("slotMinutes")*i,s,n):(e.css("z-index",8),Y(t,e))}})}var f=this;f.renderEvents=function(t,e){b(t);var n,o=t.length,a=[],l=[];for(n=0;n<o;n++)t[n].allDay?a.push(t[n]):l.push(t[n]);p("allDaySlot")&&(L(s(a),e),x()),r(i(l),e)},f.compileDaySegs=s,f.clearEvents=function(){y(),S().empty(),E().empty()},f.slotSegHtml=o,f.bindDaySeg=function(t,e,s){v(t)&&function(t,e,s){function i(){a||(e.width(n).height("").draggable("option","grid",null),a=!0)}var n,r,o,a=!0,c=p("isRTL")?-1:1,h=O(),u=W(),f=q(),v=R();e.draggable({zIndex:9,opacity:p("dragOpacity","month"),revertDuration:p("dragRevertDuration"),start:function(v,m){g("eventDragStart",e,t,v,m),G(t,e),n=e.width(),h.start(function(n,h,g,v){Z(),n?(r=!1,o=v*c,n.row?s?a&&(e.width(u-10),T(e,f*Math.round((t.end?(t.end-t.start)/yt:p("defaultEventMinutes"))/p("slotMinutes"))),e.draggable("option","grid",[u,1]),a=!1):r=!0:(Q(l(d(t.start),o),l(C(t),o)),i()),r=r||a&&!o):(i(),r=!0),e.draggable("option","revert",r)},v,"drag")},stop:function(s,n){if(h.stop(),Z(),g("eventDragStop",e,t,s,n),r)i(),e.css("filter",""),Y(t,e);else{var l=0;a||(l=Math.round((e.offset().top-B().offset().top)/f)*p("slotMinutes")+v-(60*t.start.getHours()+t.start.getMinutes())),$(this,t,o,l,a,s,n)}}})}(t,e,s.isStart),s.isEnd&&m(t)&&P(t,e,s),w(t,e)},nt.call(f);var p=f.opt,g=f.trigger,v=f.isEventDraggable,m=f.isEventResizable,_=f.eventEnd,b=f.reportEvents,y=f.reportEventClear,w=f.eventElementHandlers,x=f.setHeight,S=f.getDaySegmentContainer,E=f.getSlotSegmentContainer,O=f.getHoverListener,N=f.getMaxMinute,R=f.getMinMinute,F=f.timePosition,H=f.colContentLeft,I=f.colContentRight,L=f.renderDaySegs,P=f.resizableDayEvent,j=f.getColCnt,W=f.getColWidth,q=f.getSlotHeight,B=f.getBodyContent,V=f.reportEventElement,Y=f.showEvents,G=f.hideEvents,$=f.eventDrop,J=f.eventResize,Q=f.renderDayOverlay,Z=f.clearOverlays,tt=f.calendar,et=tt.formatDate,it=tt.formatDates}function st(t){var e,s,i,n,r,o;for(e=t.length-1;e>0;e--)for(n=t[e],s=0;s<n.length;s++)for(r=n[s],i=0;i<t[e-1].length;i++)S(r,o=t[e-1][i])&&(o.forward=Math.max(o.forward||0,(r.forward||0)+1))}function it(t,s,i){function n(t,e){var s=w[t];return"object"==typeof s?B(s,e||i):s}function r(t,e){return s.trigger.apply(s,[t,e||p].concat(Array.prototype.slice.call(arguments,2),[p]))}function o(t){return J(t.editable,(t.source||{}).editable,n("editable"))}function a(t){return t.end?d(t.end):g(t)}function c(t,e,s){var i,n=y[t._id],r=n.length;for(i=0;i<r;i++)(!e||n[i][0]!=e[0])&&n[i][s]()}function u(t,s,i,n){i=i||0;for(var r,o=t.length,a=0;a<o;a++)r=t[a],n!==e&&(r.allDay=n),h(l(r.start,s,!0),i),r.end&&(r.end=h(l(r.end,s,!0),i)),v(r,w)}function f(t,e,s){s=s||0;for(var i,n=t.length,r=0;r<n;r++)(i=t[r]).end=h(l(a(i),e,!0),s),v(i,w)}var p=this;p.element=t,p.calendar=s,p.name=i,p.opt=n,p.trigger=r,p.isEventDraggable=function(t){return o(t)&&!n("disableDragging")},p.isEventResizable=function(t){return o(t)&&!n("disableResizing")},p.reportEvents=function(t){_={};var e,s,i=t.length;for(e=0;e<i;e++)s=t[e],_[s._id]?_[s._id].push(s):_[s._id]=[s]},p.eventEnd=a,p.reportEventElement=function(t,e){b.push(e),y[t._id]?y[t._id].push(e):y[t._id]=[e]},p.reportEventClear=function(){b=[],y={}},p.eventElementHandlers=function(t,e){e.click(function(s){if(!e.hasClass("ui-draggable-dragging")&&!e.hasClass("ui-resizable-resizing"))return r("eventClick",this,t,s)}).hover(function(e){r("eventMouseover",this,t,e)},function(e){r("eventMouseout",this,t,e)})},p.showEvents=function(t,e){c(t,e,"show")},p.hideEvents=function(t,e){c(t,e,"hide")},p.eventDrop=function(t,e,s,i,n,o,a){var l=e.allDay,c=e._id;u(_[c],s,i,n),r("eventDrop",t,e,s,i,n,function(){u(_[c],-s,-i,l),m(c)},o,a),m(c)},p.eventResize=function(t,e,s,i,n,o){var a=e._id;f(_[a],s,i),r("eventResize",t,e,s,i,function(){f(_[a],-s,-i),m(a)},n,o),m(a)};var g=p.defaultEventEnd,v=s.normalizeEvent,m=s.reportEventChange,_={},b=[],y={},w=s.options}function nt(){function s(e,s,r){var l,d,p,g=t("<div/>"),v=F(),m=e.length;for(g[0].innerHTML=i(e),l=g.children(),v.append(l),n(e,l),o(e),a(e),c(e),f(e,u(h())),l=[],d=0;d<m;d++)(p=e[d].element)&&(e[d].row===s&&p.css("top",r),l.push(p[0]));return t(l)}function i(t){var e,s,i,n,r,o,a,l,c,h,u=g("isRTL"),d=t.length,f=E(),p=f.left,v=f.right,b="";for(e=0;e<d;e++)i=(s=t[e]).event,r=["fc-event","fc-event-skin","fc-event-hori"],m(i)&&r.push("fc-event-draggable"),u?(s.isStart&&r.push("fc-corner-right"),s.isEnd&&r.push("fc-corner-left"),o=N(s.end.getDay()-1),a=N(s.start.getDay()),l=s.isEnd?T(o):p,c=s.isStart?O(a):v):(s.isStart&&r.push("fc-corner-left"),s.isEnd&&r.push("fc-corner-right"),o=N(s.start.getDay()),a=N(s.end.getDay()-1),l=s.isStart?T(o):p,c=s.isEnd?O(a):v),r=r.concat(i.className),i.source&&(r=r.concat(i.source.className||[])),n=i.url,h=X(i,g),b+=n?"<a href='"+K(n)+"'":"<div",b+=" class='"+r.join(" ")+"' style='position:absolute;z-index:8;left:"+l+"px;"+h+"'><div class='fc-event-inner fc-event-skin'"+(h?" style='"+h+"'":"")+">",!i.allDay&&s.isStart&&(b+="<span class='fc-event-time'>"+K(L(i.start,i.end,g("timeFormat")))+"</span>"),b+="<span class='fc-event-title'>"+K(i.title)+"</span></div>",s.isEnd&&_(i)&&(b+="<div class='ui-resizable-handle ui-resizable-"+(u?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>"),b+="</"+(n?"a":"div")+">",s.left=l,s.outerWidth=c-l,s.startCol=o,s.endCol=a+1;return b}function n(e,s){var i,n,r,o,a,l=e.length;for(i=0;i<l;i++)r=(n=e[i]).event,o=t(s[i]),!1===(a=v("eventRender",r,r,o))?o.remove():(a&&!0!==a&&(a=t(a).css({position:"absolute",left:n.left}),o.replaceWith(a),o=a),n.element=o)}function r(t){var e,s,i,n=t.length;for(e=0;e<n;e++)(i=(s=t[e]).element)&&y(s.event,i)}function o(t){var s,i,n,r,o,a=t.length,l={};for(s=0;s<a;s++)(n=(i=t[s]).element)&&((o=l[r=i.key=U(n[0])])===e&&(o=l[r]=z(n,!0)),i.hsides=o)}function a(t){var e,s,i,n=t.length;for(e=0;e<n;e++)(i=(s=t[e]).element)&&(i[0].style.width=Math.max(0,s.outerWidth-s.hsides)+"px")}function c(t){var s,i,n,r,o,a=t.length,l={};for(s=0;s<a;s++)(n=(i=t[s]).element)&&((o=l[r=i.key])===e&&(o=l[r]=H(n)),i.outerHeight=n[0].offsetHeight+o)}function h(){var t,e=S(),s=[];for(t=0;t<e;t++)s[t]=D(t).find("td:first div.fc-day-content > div");return s}function u(t){var e,s=t.length,i=[];for(e=0;e<s;e++)i[e]=t[e][0].offsetTop;return i}function f(t,e){var s,i,n,r,o=t.length;for(s=0;s<o;s++)(n=(i=t[s]).element)&&(n[0].style.top=e[i.row]+(i.top||0)+"px",r=i.event,v("eventAfterRender",r,r,n))}var p=this;p.renderDaySegs=function(t,e){var s,l,d,p,g,v,m,_=F(),b=S(),y=k(),w=0,C=t.length;for(_[0].innerHTML=i(t),n(t,_.children()),r(t),function(t,e,s){var i,n,r,o,a=t.length;for(i=0;i<a;i++)n=t[i],(r=n.element)&&((o=n.event)._id===s?I(o,r,n):r[0]._fci=i);M(e,t,I)}(t,_,e),o(t),a(t),c(t),s=h(),l=0;l<b;l++){for(d=[],p=0;p<y;p++)d[p]=0;for(;w<C&&(g=t[w]).row==l;){for(v=W(d.slice(g.startCol,g.endCol)),g.top=v,v+=g.outerHeight,m=g.startCol;m<g.endCol;m++)d[m]=v;w++}s[l].height(W(d))}f(t,u(s))},p.resizableDayEvent=function(e,i,n){var r=g("isRTL"),o=r?"w":"e",a=i.find("div.ui-resizable-"+o),c=!1;V(i),i.mousedown(function(t){t.preventDefault()}).click(function(t){c&&(t.preventDefault(),t.stopImmediatePropagation())}),a.mousedown(function(a){if(1==a.which){c=!0;var h,u,f=p.getHoverListener(),g=S(),m=k(),_=r?-1:1,y=r?m-1:0,D=i.css("top"),M=t.extend({},e),E=R(e.start);q(),t("body").css("cursor",o+"-resize").one("mouseup",function(s){v("eventResizeStop",this,e,s),t("body").css("cursor",""),f.stop(),j(),h&&x(this,e,h,0,s),setTimeout(function(){c=!1},0)}),v("eventResizeStart",this,e,a),f.start(function(t,i){if(t){var a=Math.max(E.row,t.row),c=t.col;1==g&&(a=0),a==E.row&&(c=r?Math.min(E.col,c):Math.max(E.col,c)),h=7*a+c*_+y-(7*i.row+i.col*_+y);var f=l(b(e),h,!0);if(h){M.end=f;var p=u;(u=s(A([M]),n.row,D)).find("*").css("cursor",o+"-resize"),p&&p.remove(),C(e)}else u&&(w(e),u.remove(),u=null);j(),P(e.start,l(d(f),1))}},a)}})};var g=p.opt,v=p.trigger,m=p.isEventDraggable,_=p.isEventResizable,b=p.eventEnd,y=p.reportEventElement,w=p.showEvents,C=p.hideEvents,x=p.eventResize,S=p.getRowCnt,k=p.getColCnt,D=(p.getColWidth,p.allDayRow),E=p.allDayBounds,T=p.colContentLeft,O=p.colContentRight,N=p.dayOfWeekCol,R=p.dateCell,A=p.compileDaySegs,F=p.getDaySegmentContainer,I=p.bindDaySeg,L=p.calendar.formatDates,P=p.renderDayOverlay,j=p.clearOverlays,q=p.clearSelection}function rt(){function e(t){c&&(c=!1,l(),r("unselect",null,t))}function s(t,e,s,i){c=!0,r("select",null,t,e,s,i)}var i=this;i.select=function(t,i,n){e(),i||(i=o(t,n)),a(t,i,n),s(t,i,n)},i.unselect=e,i.reportSelection=s,i.daySelectionMousedown=function(r){var o=i.cellDate,c=i.cellIsAllDay,h=i.getHoverListener(),u=i.reportDayClick;if(1==r.which&&n("selectable")){var d;e(r),h.start(function(t,e){l(),t&&c(t)?(d=[o(e),o(t)].sort(j),a(d[0],d[1],!0)):d=null},r),t(document).one("mouseup",function(t){h.stop(),d&&(+d[0]==+d[1]&&u(d[0],!0,t),s(d[0],d[1],!0,t))})}};var n=i.opt,r=i.trigger,o=i.defaultSelectionEnd,a=i.renderSelection,l=i.clearSelection,c=!1;n("selectable")&&n("unselectAuto")&&t(document).mousedown(function(s){var i=n("unselectCancel");i&&t(s.target).parents(i).length||e(s)})}function ot(){this.renderOverlay=function(i,n){var r=s.shift();return r||(r=t("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),r[0].parentNode!=n[0]&&r.appendTo(n),e.push(r.css(i).show()),r},this.clearOverlays=function(){for(var t;t=e.shift();)s.push(t.hide().unbind())};var e=[],s=[]}function at(t){var e,s,i=this;i.build=function(){t(e=[],s=[])},i.cell=function(t,i){var n,r=e.length,o=s.length,a=-1,l=-1;for(n=0;n<r;n++)if(i>=e[n][0]&&i<e[n][1]){a=n;break}for(n=0;n<o;n++)if(t>=s[n][0]&&t<s[n][1]){l=n;break}return a>=0&&l>=0?{row:a,col:l}:null},i.rect=function(t,i,n,r,o){var a=o.offset();return{top:e[t][0]-a.top,left:s[i][0]-a.left,width:s[r][1]-s[i][0],height:e[n][1]-e[t][0]}}}function lt(e){function s(t){ct(t);var s=e.cell(t.pageX,t.pageY);(!s!=!o||s&&(s.row!=o.row||s.col!=o.col))&&(s?(r||(r=s),n(s,r,s.row-r.row,s.col-r.col)):n(s,r),o=s)}var i,n,r,o;this.start=function(a,l,c){n=a,r=o=null,e.build(),s(l),i=c||"mousemove",t(document).bind(i,s)},this.stop=function(){return t(document).unbind(i,s),o}}function ct(t){t.pageX===e&&(t.pageX=t.originalEvent.pageX,t.pageY=t.originalEvent.pageY)}function ht(t){function s(e){return n[e]=n[e]||t(e)}var i=this,n={},r={},o={};i.left=function(t){return r[t]=r[t]===e?s(t).position().left:r[t]},i.right=function(t){return o[t]=o[t]===e?i.left(t)+s(t).width():o[t]},i.clear=function(){n={},r={},o={}}}var ut={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"&nbsp;&#9668;&nbsp;",next:"&nbsp;&#9658;&nbsp;",prevYear:"&nbsp;&lt;&lt;&nbsp;",nextYear:"&nbsp;&gt;&gt;&nbsp;",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*"},dt={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"&nbsp;&#9658;&nbsp;",next:"&nbsp;&#9668;&nbsp;",prevYear:"&nbsp;&gt;&gt;&nbsp;",nextYear:"&nbsp;&lt;&lt;&nbsp;"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},ft=t.fullCalendar={version:"1.5.4"},pt=ft.views={};t.fn.fullCalendar=function(s){if("string"==typeof s){var n,r=Array.prototype.slice.call(arguments,1);return this.each(function(){var i=t.data(this,"fullCalendar");if(i&&t.isFunction(i[s])){var o=i[s].apply(i,r);n===e&&(n=o),"destroy"==s&&t.removeData(this,"fullCalendar")}}),n!==e?n:this}var o=s.eventSources||[];return delete s.eventSources,s.events&&(o.push(s.events),delete s.events),s=t.extend(!0,{},ut,s.isRTL||s.isRTL===e&&ut.isRTL?dt:{},s),this.each(function(e,n){var r=t(n),a=new i(r,s,o);r.data("fullCalendar",a),a.render()}),this},ft.sourceNormalizers=[],ft.sourceFetchers=[];var gt={dataType:"json",cache:!1},vt=1;ft.addDays=l,ft.cloneDate=d,ft.parseDate=m,ft.parseISO8601=_,ft.parseTime=b,ft.formatDate=y,ft.formatDates=w;var mt=["sun","mon","tue","wed","thu","fri","sat"],_t=864e5,bt=36e5,yt=6e4,wt={s:function(t){return t.getSeconds()},ss:function(t){return q(t.getSeconds())},m:function(t){return t.getMinutes()},mm:function(t){return q(t.getMinutes())},h:function(t){return t.getHours()%12||12},hh:function(t){return q(t.getHours()%12||12)},H:function(t){return t.getHours()},HH:function(t){return q(t.getHours())},d:function(t){return t.getDate()},dd:function(t){return q(t.getDate())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return t.getMonth()+1},MM:function(t){return q(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},yy:function(t){return(t.getFullYear()+"").substring(2)},yyyy:function(t){return t.getFullYear()},t:function(t){return t.getHours()<12?"a":"p"},tt:function(t){return t.getHours()<12?"am":"pm"},T:function(t){return t.getHours()<12?"A":"P"},TT:function(t){return t.getHours()<12?"AM":"PM"},u:function(t){return y(t,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(t){var e=t.getDate();return e>10&&e<20?"th":["st","nd","rd"][e%10-1]||"th"}};ft.applyAll=$,pt.month=function(t,e){var s=this;s.render=function(t,e){e&&(a(t,e),t.setDate(1));var o=d(t,!0);o.setDate(1);var c=a(d(o),1),h=d(o),u=d(c),f=i("firstDay"),g=i("weekends")?0:1;g&&(p(h),p(u,-1,!0)),l(h,-(h.getDay()-Math.max(f,g)+7)%7),l(u,(7-u.getDay()+Math.max(f,g))%7);var v=Math.round((u-h)/(7*_t));"fixed"==i("weekMode")&&(l(u,7*(6-v)),v=6),s.title=r(o,i("titleFormat")),s.start=o,s.end=c,s.visStart=h,s.visEnd=u,n(6,v,g?5:7,!0)},Q.call(s,t,e,"month");var i=s.opt,n=s.renderBasic,r=e.formatDate},pt.basicWeek=function(t,e){var s=this;s.render=function(t,e){e&&l(t,7*e);var o=l(d(t),-(t.getDay()-i("firstDay")+7)%7),a=l(d(o),7),c=d(o),h=d(a),u=i("weekends");u||(p(c),p(h,-1,!0)),s.title=r(c,l(d(h),-1),i("titleFormat")),s.start=o,s.end=a,s.visStart=c,s.visEnd=h,n(1,1,u?7:5,!1)},Q.call(s,t,e,"basicWeek");var i=s.opt,n=s.renderBasic,r=e.formatDates},pt.basicDay=function(t,e){var s=this;s.render=function(t,e){e&&(l(t,e),i("weekends")||p(t,e<0?-1:1)),s.title=r(t,i("titleFormat")),s.start=s.visStart=d(t,!0),s.end=s.visEnd=l(d(s.start),1),n(1,1,1,!1)},Q.call(s,t,e,"basicDay");var i=s.opt,n=s.renderBasic,r=e.formatDate},s({weekMode:"fixed"}),pt.agendaWeek=function(t,e){var s=this;s.render=function(t,e){e&&l(t,7*e);var o=l(d(t),-(t.getDay()-i("firstDay")+7)%7),a=l(d(o),7),c=d(o),h=d(a),u=i("weekends");u||(p(c),p(h,-1,!0)),s.title=r(c,l(d(h),-1),i("titleFormat")),s.start=o,s.end=a,s.visStart=c,s.visEnd=h,n(u?7:5)},tt.call(s,t,e,"agendaWeek");var i=s.opt,n=s.renderAgenda,r=e.formatDates},pt.agendaDay=function(t,e){var s=this;s.render=function(t,e){e&&(l(t,e),i("weekends")||p(t,e<0?-1:1));var o=d(t,!0),a=l(d(o),1);s.title=r(t,i("titleFormat")),s.start=s.visStart=o,s.end=s.visEnd=a,n(1)},tt.call(s,t,e,"agendaDay");var i=s.opt,n=s.renderAgenda,r=e.formatDate},s({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24})}(jQuery),function(){var t;(t=function(){function t(){this.options_index=0,this.parsed=[]}return t.prototype.add_node=function(t){return"OPTGROUP"===t.nodeName.toUpperCase()?this.add_group(t):this.add_option(t)},t.prototype.add_group=function(t){var e,s,i,n,r,o;for(e=this.parsed.length,this.parsed.push({array_index:e,group:!0,label:t.label,children:0,disabled:t.disabled}),o=[],i=0,n=(r=t.childNodes).length;i<n;i++)s=r[i],o.push(this.add_option(s,e,t.disabled));return o},t.prototype.add_option=function(t,e,s){if("OPTION"===t.nodeName.toUpperCase())return""!==t.text?(null!=e&&(this.parsed[e].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:t.value,text:t.text,html:t.innerHTML,selected:t.selected,disabled:!0===s?s:t.disabled,group_array_index:e,classes:t.className,style:t.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1},t}()).select_to_array=function(e){var s,i,n,r,o;for(i=new t,n=0,r=(o=e.childNodes).length;n<r;n++)s=o[n],i.add_node(s);return i.parsed},this.SelectParser=t}.call(this),function(){var t;t=function(){function t(t,e){this.form_field=t,this.options=null!=e?e:{},this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers(),this.finish_setup()}return t.prototype.set_default_values=function(){var t=this;return this.click_test_action=function(e){return t.test_active_click(e)},this.activate_action=function(e){return t.activate_field(e)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.result_single_selected=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text&&this.options.allow_single_deselect,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null==this.options.enable_split_word_search||this.options.enable_split_word_search,this.search_contains=this.options.search_contains||!1,this.choices=0,this.single_backstroke_delete=this.options.single_backstroke_delete||!1,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1},t.prototype.set_default_text=function(){return this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||"Select Some Options":this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||"Select an Option",this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||"No results match"},t.prototype.mouse_enter=function(){return this.mouse_on_container=!0},t.prototype.mouse_leave=function(){return this.mouse_on_container=!1},t.prototype.input_focus=function(t){var e=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return e.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},t.prototype.input_blur=function(t){var e=this;if(!this.mouse_on_container)return this.active_field=!1,setTimeout(function(){return e.blur_test()},100)},t.prototype.result_add_option=function(t){var e,s;return t.disabled?"":(t.dom_id=this.container_id+"_o_"+t.array_index,e=t.selected&&this.is_multiple?[]:["active-result"],t.selected&&e.push("result-selected"),null!=t.group_array_index&&e.push("group-option"),""!==t.classes&&e.push(t.classes),s=""!==t.style.cssText?' style="'+t.style+'"':"",'<li id="'+t.dom_id+'" class="'+e.join(" ")+'"'+s+">"+t.html+"</li>")},t.prototype.results_update_field=function(){return this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.result_single_selected=null,this.results_build()},t.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},t.prototype.results_search=function(t){return this.results_showing?this.winnow_results():this.results_show()},t.prototype.keyup_checker=function(t){var e,s;switch(e=null!=(s=t.which)?s:t.keyCode,this.search_field_scale(),e){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(t.preventDefault(),this.results_showing)return this.result_select(t);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},t.prototype.generate_field_id=function(){var t;return t=this.generate_random_id(),this.form_field.id=t,t},t.prototype.generate_random_char=function(){var t,e;return t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",e=Math.floor(Math.random()*t.length),t.substring(e,e+1)},t}(),this.AbstractChosen=t}.call(this),function(){var t,e,s,i,n={}.hasOwnProperty,r=function(t,e){function s(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return s.prototype=e.prototype,t.prototype=new s,t.__super__=e.prototype,t};i=this,(t=jQuery).fn.extend({chosen:function(s){var i,n,r;return r=navigator.userAgent.toLowerCase(),"msie"===(i={name:(n=/(msie) ([\w.]+)/.exec(r)||[])[1]||"",version:n[2]||"0"}).name&&("6.0"===i.version||"7.0"===i.version&&7===document.documentMode)?this:this.each(function(i){var n;if(!(n=t(this)).hasClass("chzn-done"))return n.data("chosen",new e(this,s))})}}),e=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return r(n,e),n.prototype.setup=function(){return this.form_field_jq=t(this.form_field),this.current_value=this.form_field_jq.val(),this.is_rtl=this.form_field_jq.hasClass("chzn-rtl")},n.prototype.finish_setup=function(){return this.form_field_jq.addClass("chzn-done")},n.prototype.set_up_html=function(){var e,i,n,r,o,a;return this.container_id=this.form_field.id.length?this.form_field.id.replace(/[^\w]/g,"_"):this.generate_field_id(),this.container_id+="_chzn",(e=["chzn-container"]).push("chzn-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&e.push(this.form_field.className),this.is_rtl&&e.push("chzn-rtl"),this.f_width=this.form_field_jq.outerWidth(),n={id:this.container_id,class:e.join(" "),style:"width: "+this.f_width+"px;",title:this.form_field.title},i=t("<div />",n),this.is_multiple?i.html('<ul class="chzn-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chzn-drop" style="left:-9000px;"><ul class="chzn-results"></ul></div>'):i.html('<a href="javascript:void(0)" class="chzn-single chzn-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chzn-drop" style="left:-9000px;"><div class="chzn-search"><input type="text" autocomplete="off" /></div><ul class="chzn-results"></ul></div>'),this.form_field_jq.hide().after(i),this.container=t("#"+this.container_id),this.dropdown=this.container.find("div.chzn-drop").first(),r=this.container.height(),o=this.f_width-s(this.dropdown),this.dropdown.css({width:o+"px",top:r+"px"}),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chzn-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chzn-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chzn-search").first(),this.selected_item=this.container.find(".chzn-single").first(),a=o-s(this.search_container)-s(this.search_field),this.search_field.css({width:a+"px"})),this.results_build(),this.set_tab_index(),this.form_field_jq.trigger("liszt:ready",{chosen:this})},n.prototype.register_observers=function(){var t=this;return this.container.mousedown(function(e){return t.container_mousedown(e)}),this.container.mouseup(function(e){return t.container_mouseup(e)}),this.container.mouseenter(function(e){return t.mouse_enter(e)}),this.container.mouseleave(function(e){return t.mouse_leave(e)}),this.search_results.mouseup(function(e){return t.search_results_mouseup(e)}),this.search_results.mouseover(function(e){return t.search_results_mouseover(e)}),this.search_results.mouseout(function(e){return t.search_results_mouseout(e)}),this.form_field_jq.bind("liszt:updated",function(e){return t.results_update_field(e)}),this.form_field_jq.bind("liszt:activate",function(e){return t.activate_field(e)}),this.form_field_jq.bind("liszt:open",function(e){return t.container_mousedown(e)}),this.search_field.blur(function(e){return t.input_blur(e)}),this.search_field.keyup(function(e){return t.keyup_checker(e)}),this.search_field.keydown(function(e){return t.keydown_checker(e)}),this.search_field.focus(function(e){return t.input_focus(e)}),this.is_multiple?this.search_choices.click(function(e){return t.choices_click(e)}):this.container.click(function(t){return t.preventDefault()})},n.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chzn-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus",this.activate_action),this.close_field()):(this.container.removeClass("chzn-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus",this.activate_action))},n.prototype.container_mousedown=function(e){var s;if(!this.is_disabled)return s=null!=e&&t(e.target).hasClass("search-choice-close"),e&&"mousedown"===e.type&&!this.results_showing&&e.preventDefault(),this.pending_destroy_click||s?this.pending_destroy_click=!1:(this.active_field?!this.is_multiple&&e&&(t(e.target)[0]===this.selected_item[0]||t(e.target).parents("a.chzn-single").length)&&(e.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),t(document).click(this.click_test_action),this.results_show()),this.activate_field())},n.prototype.container_mouseup=function(t){if("ABBR"===t.target.nodeName&&!this.is_disabled)return this.results_reset(t)},n.prototype.blur_test=function(t){if(!this.active_field&&this.container.hasClass("chzn-container-active"))return this.close_field()},n.prototype.close_field=function(){return t(document).unbind("click",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chzn-container-active"),this.winnow_results_clear(),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},n.prototype.activate_field=function(){return this.container.addClass("chzn-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},n.prototype.test_active_click=function(e){return t(e.target).parents("#"+this.container_id).length?this.active_field=!0:this.close_field()},n.prototype.results_build=function(){var t,e,s,n,r;for(this.parsing=!0,this.results_data=i.SelectParser.select_to_array(this.form_field),this.is_multiple&&this.choices>0?(this.search_choices.find("li.search-choice").remove(),this.choices=0):this.is_multiple||(this.selected_item.addClass("chzn-default").find("span").text(this.default_text),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?this.container.addClass("chzn-container-single-nosearch"):this.container.removeClass("chzn-container-single-nosearch")),t="",s=0,n=(r=this.results_data).length;s<n;s++)(e=r[s]).group?t+=this.result_add_group(e):e.empty||(t+=this.result_add_option(e),e.selected&&this.is_multiple?this.choice_build(e):e.selected&&!this.is_multiple&&(this.selected_item.removeClass("chzn-default").find("span").text(e.text),this.allow_single_deselect&&this.single_deselect_control_build()));return this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.search_results.html(t),this.parsing=!1},n.prototype.result_add_group=function(e){return e.disabled?"":(e.dom_id=this.container_id+"_g_"+e.array_index,'<li id="'+e.dom_id+'" class="group-result">'+t("<div />").text(e.label).html()+"</li>")},n.prototype.result_do_highlight=function(t){var e,s,i,n,r;if(t.length){if(this.result_clear_highlight(),this.result_highlight=t,this.result_highlight.addClass("highlighted"),n=(i=parseInt(this.search_results.css("maxHeight"),10))+(r=this.search_results.scrollTop()),(e=(s=this.result_highlight.position().top+this.search_results.scrollTop())+this.result_highlight.outerHeight())>=n)return this.search_results.scrollTop(e-i>0?e-i:0);if(s<r)return this.search_results.scrollTop(s)}},n.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},n.prototype.results_show=function(){var t;if(this.is_multiple){if(this.max_selected_options<=this.choices)return this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1}else this.selected_item.addClass("chzn-single-with-drop"),this.result_single_selected&&this.result_do_highlight(this.result_single_selected);return t=this.is_multiple?this.container.height():this.container.height()-1,this.form_field_jq.trigger("liszt:showing_dropdown",{chosen:this}),this.dropdown.css({top:t+"px",left:0}),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results()},n.prototype.results_hide=function(){return this.is_multiple||this.selected_item.removeClass("chzn-single-with-drop"),this.result_clear_highlight(),this.form_field_jq.trigger("liszt:hiding_dropdown",{chosen:this}),this.dropdown.css({left:"-9000px"}),this.results_showing=!1},n.prototype.set_tab_index=function(t){var e;if(this.form_field_jq.attr("tabindex"))return e=this.form_field_jq.attr("tabindex"),this.form_field_jq.attr("tabindex",-1),this.search_field.attr("tabindex",e)},n.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},n.prototype.search_results_mouseup=function(e){var s;if((s=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first()).length)return this.result_highlight=s,this.result_select(e),this.search_field.focus()},n.prototype.search_results_mouseover=function(e){var s;if(s=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first())return this.result_do_highlight(s)},n.prototype.search_results_mouseout=function(e){if(t(e.target).hasClass("active-result"))return this.result_clear_highlight()},n.prototype.choices_click=function(e){if(e.preventDefault(),this.active_field&&!t(e.target).hasClass("search-choice")&&!this.results_showing)return this.results_show()},n.prototype.choice_build=function(e){var s,i,n=this;return this.is_multiple&&this.max_selected_options<=this.choices?(this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1):(s=this.container_id+"_c_"+e.array_index,this.choices+=1,i=e.disabled?'<li class="search-choice search-choice-disabled" id="'+s+'"><span>'+e.html+"</span></li>":'<li class="search-choice" id="'+s+'"><span>'+e.html+'</span><a href="javascript:void(0)" class="search-choice-close" rel="'+e.array_index+'"></a></li>',this.search_container.before(i),t("#"+s).find("a").first().click(function(t){return n.choice_destroy_link_click(t)}))},n.prototype.choice_destroy_link_click=function(e){return e.preventDefault(),this.is_disabled?e.stopPropagation:(this.pending_destroy_click=!0,this.choice_destroy(t(e.target)))},n.prototype.choice_destroy=function(t){if(this.result_deselect(t.attr("rel")))return this.choices-=1,this.show_search_field_default(),this.is_multiple&&this.choices>0&&this.search_field.val().length<1&&this.results_hide(),t.parents("li").first().remove(),this.search_field_scale()},n.prototype.results_reset=function(){if(this.form_field.options[0].selected=!0,this.selected_item.find("span").text(this.default_text),this.is_multiple||this.selected_item.addClass("chzn-default"),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field)return this.results_hide()},n.prototype.results_reset_cleanup=function(){return this.current_value=this.form_field_jq.val(),this.selected_item.find("abbr").remove()},n.prototype.result_select=function(t){var e,s,i,n;if(this.result_highlight)return s=(e=this.result_highlight).attr("id"),this.result_clear_highlight(),this.is_multiple?this.result_deactivate(e):(this.search_results.find(".result-selected").removeClass("result-selected"),this.result_single_selected=e,this.selected_item.removeClass("chzn-default")),e.addClass("result-selected"),n=s.substr(s.lastIndexOf("_")+1),(i=this.results_data[n]).selected=!0,this.form_field.options[i.options_index].selected=!0,this.is_multiple?this.choice_build(i):(this.selected_item.find("span").first().text(i.text),this.allow_single_deselect&&this.single_deselect_control_build()),(!t.metaKey&&!t.ctrlKey||!this.is_multiple)&&this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field_jq.val()!==this.current_value)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[i.options_index].value}),this.current_value=this.form_field_jq.val(),this.search_field_scale()},n.prototype.result_activate=function(t){return t.addClass("active-result")},n.prototype.result_deactivate=function(t){return t.removeClass("active-result")},n.prototype.result_deselect=function(e){var s;return s=this.results_data[e],!this.form_field.options[s.options_index].disabled&&(s.selected=!1,this.form_field.options[s.options_index].selected=!1,t("#"+this.container_id+"_o_"+e).removeClass("result-selected").addClass("active-result").show(),this.result_clear_highlight(),this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[s.options_index].value}),this.search_field_scale(),!0)},n.prototype.single_deselect_control_build=function(){if(this.allow_single_deselect&&this.selected_item.find("abbr").length<1)return this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>')},n.prototype.winnow_results=function(){var e,s,i,n,r,o,a,l,c,h,u,d,f,p,g,v,m,_;for(this.no_results_clear(),c=0,h=this.search_field.val()===this.default_text?"":t("<div/>").text(t.trim(this.search_field.val())).html(),o=this.search_contains?"":"^",r=new RegExp(o+h.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),f=new RegExp(h.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),p=0,v=(_=this.results_data).length;p<v;p++)if(!(s=_[p]).disabled&&!s.empty)if(s.group)t("#"+s.dom_id).css("display","none");else if(!this.is_multiple||!s.selected){if(e=!1,l=s.dom_id,a=t("#"+l),r.test(s.html))e=!0,c+=1;else if(this.enable_split_word_search&&(s.html.indexOf(" ")>=0||0===s.html.indexOf("["))&&(n=s.html.replace(/\[|\]/g,"").split(" ")).length)for(g=0,m=n.length;g<m;g++)i=n[g],r.test(i)&&(e=!0,c+=1);e?(h.length?(u=s.html.search(f),d=(d=s.html.substr(0,u+h.length)+"</em>"+s.html.substr(u+h.length)).substr(0,u)+"<em>"+d.substr(u)):d=s.html,a.html(d),this.result_activate(a),null!=s.group_array_index&&t("#"+this.results_data[s.group_array_index].dom_id).css("display","list-item")):(this.result_highlight&&l===this.result_highlight.attr("id")&&this.result_clear_highlight(),this.result_deactivate(a))}return c<1&&h.length?this.no_results(h):this.winnow_results_set_highlight()},n.prototype.winnow_results_clear=function(){var e,s,i,n,r;for(this.search_field.val(""),r=[],i=0,n=(s=this.search_results.find("li")).length;i<n;i++)e=s[i],(e=t(e)).hasClass("group-result")?r.push(e.css("display","auto")):this.is_multiple&&e.hasClass("result-selected")?r.push(void 0):r.push(this.result_activate(e));return r},n.prototype.winnow_results_set_highlight=function(){var t,e;if(!this.result_highlight&&null!=(t=(e=this.is_multiple?[]:this.search_results.find(".result-selected.active-result")).length?e.first():this.search_results.find(".active-result").first()))return this.result_do_highlight(t)},n.prototype.no_results=function(e){var s;return(s=t('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>')).find("span").first().html(e),this.search_results.append(s)},n.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},n.prototype.keydown_arrow=function(){var e,s;if(this.result_highlight?this.results_showing&&((s=this.result_highlight.nextAll("li.active-result").first())&&this.result_do_highlight(s)):(e=this.search_results.find("li.active-result").first())&&this.result_do_highlight(t(e)),!this.results_showing)return this.results_show()},n.prototype.keyup_arrow=function(){var t;return this.results_showing||this.is_multiple?this.result_highlight?(t=this.result_highlight.prevAll("li.active-result")).length?this.result_do_highlight(t.first()):(this.choices>0&&this.results_hide(),this.result_clear_highlight()):void 0:this.results_show()},n.prototype.keydown_backstroke=function(){var t;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(t=this.search_container.siblings("li.search-choice").last()).length&&!t.hasClass("search-choice-disabled")?(this.pending_backstroke=t,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0},n.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},n.prototype.keydown_checker=function(t){var e,s;switch(e=null!=(s=t.which)?s:t.keyCode,this.search_field_scale(),8!==e&&this.pending_backstroke&&this.clear_backstroke(),e){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(t),this.mouse_on_container=!1;break;case 13:t.preventDefault();break;case 38:t.preventDefault(),this.keyup_arrow();break;case 40:this.keydown_arrow()}},n.prototype.search_field_scale=function(){var e,s,i,n,r,o,a,l;if(this.is_multiple){for(0,o=0,n="position:absolute; left: -1000px; top: -1000px; display:none;",a=0,l=(r=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"]).length;a<l;a++)n+=(i=r[a])+":"+this.search_field.css(i)+";";return(s=t("<div />",{style:n})).text(this.search_field.val()),t("body").append(s),o=s.width()+25,s.remove(),o>this.f_width-10&&(o=this.f_width-10),this.search_field.css({width:o+"px"}),e=this.container.height(),this.dropdown.css({top:e+"px"})}},n.prototype.generate_random_id=function(){var e;for(e="sel"+this.generate_random_char()+this.generate_random_char()+this.generate_random_char();t("#"+e).length>0;)e+=this.generate_random_char();return e},n}(AbstractChosen),i.Chosen=e,s=function(t){return t.outerWidth()-t.width()},i.get_side_border_padding=s}.call(this),function(t){void 0===t.fn.each2&&t.fn.extend({each2:function(e){for(var s=t([0]),i=-1,n=this.length;n>++i&&(s.context=s[0]=this[i])&&!1!==e.call(s[0],i,s););return this}})}(jQuery),function(t,e){"use strict";function s(t,e){for(var s=0,n=e.length;n>s;s+=1)if(i(t,e[s]))return s;return-1}function i(t,s){return t===s||t!==e&&s!==e&&(null!==t&&null!==s&&(t.constructor===String?t+""==s+"":s.constructor===String&&s+""==t+""))}function n(e,s){var i,n,r;if(null===e||1>e.length)return[];for(n=0,r=(i=e.split(s)).length;r>n;n+=1)i[n]=t.trim(i[n]);return i}function r(t){return t.outerWidth(!1)-t.width()}function o(s){var i="keyup-change-value";s.bind("keydown",function(){t.data(s,i)===e&&t.data(s,i,s.val())}),s.bind("keyup",function(){var n=t.data(s,i);n!==e&&s.val()!==n&&(t.removeData(s,i),s.trigger("keyup-change"))})}function a(t,s,i){var n;return i=i||e,function(){var e=arguments;window.clearTimeout(n),n=window.setTimeout(function(){s.apply(i,e)},t)}}function l(t){t[0]!==document.activeElement&&window.setTimeout(function(){var e,s=t[0],i=t.val().length;t.focus(),t.is(":visible")&&s===document.activeElement&&(s.setSelectionRange?s.setSelectionRange(i,i):s.createTextRange&&((e=s.createTextRange()).collapse(!1),e.select()))},0)}function c(t){t.preventDefault(),t.stopPropagation()}function h(e){if(!k){var s=e[0].currentStyle||window.getComputedStyle(e[0],null);(k=t(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:s.fontSize,fontFamily:s.fontFamily,fontStyle:s.fontStyle,fontWeight:s.fontWeight,letterSpacing:s.letterSpacing,textTransform:s.textTransform,whiteSpace:"nowrap"})).attr("class","select2-sizer"),t("body").append(k)}return k.text(e.val()),k.width()}function u(e,s,i){var n,r=[];(n=e.attr("class"))&&t((n=""+n).split(" ")).each2(function(){0===this.indexOf("select2-")&&r.push(this)}),(n=s.attr("class"))&&t((n=""+n).split(" ")).each2(function(){0!==this.indexOf("select2-")&&(i(this)&&r.push(this))}),e.attr("class",r.join(" "))}function d(t,s,i,n){var r=t.toUpperCase().indexOf(s.toUpperCase()),o=s.length;return 0>r?(i.push(n(t)),e):(i.push(n(t.substring(0,r))),i.push("<span class='select2-match'>"),i.push(n(t.substring(r,r+o))),i.push("</span>"),i.push(n(t.substring(r+o,t.length))),e)}function f(e){var s,i=0,n=null,r=e.quietMillis||100,o=e.url,a=this;return function(l){window.clearTimeout(s),s=window.setTimeout(function(){var s=i+=1,r=e.data,c=o,h=e.transport||t.ajax,u=e.type||"GET",d={};r=r?r.call(a,l.term,l.page,l.context):null,c="function"==typeof c?c.call(a,l.term,l.page,l.context):c,null!==n&&n.abort(),e.params&&(t.isFunction(e.params)?t.extend(d,e.params.call(a)):t.extend(d,e.params)),t.extend(d,{url:c,dataType:e.dataType,data:r,type:u,cache:!1,success:function(t){if(!(i>s)){var n=e.results(t,l.page);l.callback(n)}}}),n=h.call(a,d)},r)}}function p(s){var i,n,r=s,o=function(t){return""+t.text};t.isArray(r)&&(r={results:n=r}),!1===t.isFunction(r)&&(n=r,r=function(){return n});var a=r();return a.text&&(o=a.text,t.isFunction(o)||(i=r.text,o=function(t){return t[i]})),function(s){var i,n=s.term,a={results:[]};return""===n?(s.callback(r()),e):(i=function(e,r){var a,l;if((e=e[0]).children){for(l in a={},e)e.hasOwnProperty(l)&&(a[l]=e[l]);a.children=[],t(e.children).each2(function(t,e){i(e,a.children)}),(a.children.length||s.matcher(n,o(a),e))&&r.push(a)}else s.matcher(n,o(e),e)&&r.push(e)},t(r().results).each2(function(t,e){i(e,a.results)}),s.callback(a),e)}}function g(s){var i=t.isFunction(s);return function(n){var r=n.term,o={results:[]};t(i?s():s).each(function(){var t=this.text!==e,s=t?this.text:this;(""===r||n.matcher(r,s))&&o.results.push(t?this:{id:this,text:this})}),n.callback(o)}}function v(e){if(t.isFunction(e))return!0;if(!e)return!1;throw Error("formatterName must be a function or a falsy value")}function m(e){return t.isFunction(e)?e():e}function _(e){var s=0;return t.each(e,function(t,e){e.children?s+=_(e.children):s++}),s}function b(e,s){var i=function(){};return(i.prototype=new e).constructor=i,i.prototype.parent=e.prototype,i.prototype=t.extend(i.prototype,s),i}var y,w,C,x,S,k,D,M;window.Select2===e&&(y={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(t){switch(t=t.which?t.which:t){case y.LEFT:case y.RIGHT:case y.UP:case y.DOWN:return!0}return!1},isControl:function(t){switch(t.which){case y.SHIFT:case y.CTRL:case y.ALT:return!0}return!!t.metaKey},isFunctionKey:function(t){return(t=t.which?t.which:t)>=112&&123>=t}},M=t(document),S=function(){var t=1;return function(){return t++}}(),M.bind("mousemove",function(t){D={x:t.pageX,y:t.pageY}}),w=b(Object,{bind:function(t){var e=this;return function(){t.apply(e,arguments)}},init:function(i){var n,r,l=".select2-results";this.opts=i=this.prepareOpts(i),this.id=i.id,i.element.data("select2")!==e&&null!==i.element.data("select2")&&this.destroy(),this.enabled=!0,this.container=this.createContainer(),this.containerId="s2id_"+(i.element.attr("id")||"autogen"+S()),this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.body=function(t){var e,s=!1;return function(){return!1===s&&(e=t(),s=!0),e}}(function(){return i.element.closest("body")}),u(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.css(m(i.containerCss)),this.container.addClass(m(i.containerCssClass)),this.elementTabIndex=this.opts.element.attr("tabIndex"),this.opts.element.data("select2",this).addClass("select2-offscreen").bind("focus.select2",function(){t(this).select2("focus")}).attr("tabIndex","-1").before(this.container),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),this.dropdown.addClass(m(i.dropdownCssClass)),this.dropdown.data("select2",this),this.results=n=this.container.find(l),this.search=r=this.container.find("input.select2-input"),r.attr("tabIndex",this.elementTabIndex),this.resultsPage=0,this.context=null,this.initContainer(),function(s){s.bind("mousemove",function(s){var i=D;(i===e||i.x!==s.pageX||i.y!==s.pageY)&&t(s.target).trigger("mousemove-filtered",s)})}(this.results),this.dropdown.delegate(l,"mousemove-filtered touchstart touchmove touchend",this.bind(this.highlightUnderEvent)),function(t,e){var i=a(t,function(t){e.trigger("scroll-debounced",t)});e.bind("scroll",function(t){s(t.target,e.get())>=0&&i(t)})}(80,this.results),this.dropdown.delegate(l,"scroll-debounced",this.bind(this.loadMoreIfNeeded)),t.fn.mousewheel&&n.mousewheel(function(t,e,s,i){var r=n.scrollTop();i>0&&0>=r-i?(n.scrollTop(0),c(t)):0>i&&n.get(0).scrollHeight-n.scrollTop()+i<=n.height()&&(n.scrollTop(n.get(0).scrollHeight-n.height()),c(t))}),o(r),r.bind("keyup-change input paste",this.bind(this.updateResults)),r.bind("focus",function(){r.addClass("select2-focused")}),r.bind("blur",function(){r.removeClass("select2-focused")}),this.dropdown.delegate(l,"mouseup",this.bind(function(e){t(e.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(e),this.selectHighlighted(e))})),this.dropdown.bind("click mouseup mousedown",function(t){t.stopPropagation()}),t.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),(i.element.is(":disabled")||i.element.is("[readonly='readonly']"))&&this.disable()},destroy:function(){var t=this.opts.element.data("select2");this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),t!==e&&(t.container.remove(),t.dropdown.remove(),t.opts.element.removeClass("select2-offscreen").removeData("select2").unbind(".select2").attr({tabIndex:this.elementTabIndex}).show())},prepareOpts:function(s){var r,o,a,l;if("select"===(r=s.element).get(0).tagName.toLowerCase()&&(this.select=o=s.element),o&&t.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in s)throw Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),"function"!=typeof(s=t.extend({},{populateResults:function(i,n,r){var o,a=this.opts.id,l=this;(o=function(i,n,c){var h,u,d,f,p,g,v,m,_,b;for(h=0,u=(i=s.sortResults(i,n,r)).length;u>h;h+=1)f=!(p=!0===(d=i[h]).disabled)&&a(d)!==e,g=d.children&&d.children.length>0,(v=t("<li></li>")).addClass("select2-results-dept-"+c),v.addClass("select2-result"),v.addClass(f?"select2-result-selectable":"select2-result-unselectable"),p&&v.addClass("select2-disabled"),g&&v.addClass("select2-result-with-children"),v.addClass(l.opts.formatResultCssClass(d)),(m=t(document.createElement("div"))).addClass("select2-result-label"),(b=s.formatResult(d,m,r,l.opts.escapeMarkup))!==e&&m.html(b),v.append(m),g&&((_=t("<ul></ul>")).addClass("select2-result-sub"),o(d.children,_,c+1),v.append(_)),v.data("select2-data",d),n.append(v)})(n,i,0)}},t.fn.select2.defaults,s)).id&&(a=s.id,s.id=function(t){return t[a]}),t.isArray(s.element.data("select2Tags"))){if("tags"in s)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+s.element.attr("id");s.tags=s.element.data("select2Tags")}if(o?(s.query=this.bind(function(s){var n,o,a,l={results:[],more:!1},c=s.term;a=function(t,e){var n;t.is("option")?s.matcher(c,t.text(),t)&&e.push({id:t.attr("value"),text:t.text(),element:t.get(),css:t.attr("class"),disabled:i(t.attr("disabled"),"disabled")}):t.is("optgroup")&&(n={text:t.attr("label"),children:[],element:t.get(),css:t.attr("class")},t.children().each2(function(t,e){a(e,n.children)}),n.children.length>0&&e.push(n))},n=r.children(),this.getPlaceholder()!==e&&n.length>0&&(o=n[0],""===t(o).text()&&(n=n.not(o))),n.each2(function(t,e){a(e,l.results)}),s.callback(l)}),s.id=function(t){return t.id},s.formatResultCssClass=function(t){return t.css}):"query"in s||("ajax"in s?((l=s.element.data("ajax-url"))&&l.length>0&&(s.ajax.url=l),s.query=f.call(s.element,s.ajax)):"data"in s?s.query=p(s.data):"tags"in s&&(s.query=g(s.tags),s.createSearchChoice===e&&(s.createSearchChoice=function(t){return{id:t,text:t}}),s.initSelection===e&&(s.initSelection=function(r,o){var a=[];t(n(r.val(),s.separator)).each(function(){var n=this,r=this,o=s.tags;t.isFunction(o)&&(o=o()),t(o).each(function(){return i(this.id,n)?(r=this.text,!1):e}),a.push({id:n,text:r})}),o(a)}))),"function"!=typeof s.query)throw"query function not defined for Select2 "+s.element.attr("id");return s},monitorSource:function(){var t,e=this.opts.element;e.bind("change.select2",this.bind(function(){!0!==this.opts.element.data("select2-change-triggered")&&this.initSelection()})),t=this.bind(function(){var t,e;t="disabled"!==this.opts.element.attr("disabled"),e="readonly"===this.opts.element.attr("readonly"),t=t&&!e,this.enabled!==t&&(t?this.enable():this.disable()),u(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(m(this.opts.containerCssClass)),u(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(m(this.opts.dropdownCssClass))}),e.bind("propertychange.select2 DOMAttrModified.select2",t),"undefined"!=typeof WebKitMutationObserver&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new WebKitMutationObserver(function(e){e.forEach(t)}),this.propertyObserver.observe(e.get(0),{attributes:!0,subtree:!1}))},triggerChange:function(e){e=e||{},e=t.extend({},e,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(e),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},enable:function(){this.enabled||(this.enabled=!0,this.container.removeClass("select2-container-disabled"),this.opts.element.removeAttr("disabled"))},disable:function(){this.enabled&&(this.close(),this.enabled=!1,this.container.addClass("select2-container-disabled"),this.opts.element.attr("disabled","disabled"))},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var e,s,i,n=this.container.offset(),r=this.container.outerHeight(!1),o=this.container.outerWidth(!1),a=this.dropdown.outerHeight(!1),l=t(window).scrollLeft()+t(window).width(),c=t(window).scrollTop()+t(window).height(),h=n.top+r,u=n.left,d=c>=h+a,f=n.top-a>=this.body().scrollTop(),p=this.dropdown.outerWidth(!1),g=l>=u+p,v=this.dropdown.hasClass("select2-drop-above");"static"!==this.body().css("position")&&(h-=(e=this.body().offset()).top,u-=e.left),v?(s=!0,!f&&d&&(s=!1)):(s=!1,!d&&f&&(s=!0)),g||(u=n.left+o-p),s?(h=n.top-a,this.container.addClass("select2-drop-above"),this.dropdown.addClass("select2-drop-above")):(this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")),i=t.extend({top:h,left:u,width:o},m(this.opts.dropdownCss)),this.dropdown.css(i)},shouldOpen:function(){var e;return!this.opened()&&(e=t.Event("opening"),this.opts.element.trigger(e),!e.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return!!this.shouldOpen()&&(window.setTimeout(this.bind(this.opening),1),!0)},opening:function(){function e(){return{width:Math.max(document.documentElement.scrollWidth,t(window).width()),height:Math.max(document.documentElement.scrollHeight,t(window).height())}}var s,i=this.containerId,n="scroll."+i,r="resize."+i,o="orientationchange."+i;this.clearDropdownAlignmentPreference(),this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body()),this.updateResults(!0),0==(s=t("#select2-drop-mask")).length&&((s=t(document.createElement("div"))).attr("id","select2-drop-mask").attr("class","select2-drop-mask"),s.hide(),s.appendTo(this.body()),s.bind("mousedown touchstart",function(){var e,s=t("#select2-drop");s.length>0&&((e=s.data("select2")).opts.selectOnBlur&&e.selectHighlighted({noFocus:!0}),e.close())})),this.dropdown.prev()[0]!==s[0]&&this.dropdown.before(s),t("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),s.css(e()),s.show(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active"),this.ensureHighlightVisible();var a=this;this.container.parents().add(window).each(function(){t(this).bind(r+" "+n+" "+o,function(){t("#select2-drop-mask").css(e()),a.positionDropdown()})}),this.focusSearch()},close:function(){if(this.opened()){var e=this.containerId,s="scroll."+e,i="resize."+e,n="orientationchange."+e;this.container.parents().add(window).each(function(){t(this).unbind(s).unbind(i).unbind(n)}),this.clearDropdownAlignmentPreference(),t("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open"),this.results.empty(),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(t.Event("close"))}},clearSearch:function(){},getMaximumSelectionSize:function(){return m(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var s,i,n,r,o,a,l,c=this.results;if(!(0>(i=this.highlight()))){if(0==i)return c.scrollTop(0),e;s=this.findHighlightableChoices(),r=(n=t(s[i])).offset().top+n.outerHeight(!0),i===s.length-1&&((l=c.find("li.select2-more-results")).length>0&&(r=l.offset().top+l.outerHeight(!0))),r>(o=c.offset().top+c.outerHeight(!0))&&c.scrollTop(c.scrollTop()+(r-o)),0>(a=n.offset().top-c.offset().top)&&"none"!=n.css("display")&&c.scrollTop(c.scrollTop()+a)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-selected):not(.select2-disabled)"),this.results.find(".select2-result-selectable:not(.select2-selected):not(.select2-disabled)")},moveHighlight:function(e){for(var s=this.findHighlightableChoices(),i=this.highlight();i>-1&&s.length>i;){var n=t(s[i+=e]);if(n.hasClass("select2-result-selectable")&&!n.hasClass("select2-disabled")&&!n.hasClass("select2-selected")){this.highlight(i);break}}},highlight:function(i){var n,r,o=this.findHighlightableChoices();return 0===arguments.length?s(o.filter(".select2-highlighted")[0],o.get()):(i>=o.length&&(i=o.length-1),0>i&&(i=0),this.results.find(".select2-highlighted").removeClass("select2-highlighted"),(n=t(o[i])).addClass("select2-highlighted"),this.ensureHighlightVisible(),(r=n.data("select2-data"))&&this.opts.element.trigger({type:"highlight",val:this.id(r),choice:r}),e)},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(e){var s=t(e.target).closest(".select2-result-selectable");if(s.length>0&&!s.is(".select2-highlighted")){var i=this.findHighlightableChoices();this.highlight(i.index(s))}else 0==s.length&&this.results.find(".select2-highlighted").removeClass("select2-highlighted")},loadMoreIfNeeded:function(){var t,e=this.results,s=e.find("li.select2-more-results"),i=this.resultsPage+1,n=this,r=this.search.val(),o=this.context;0!==s.length&&(t=s.offset().top-e.offset().top-e.height(),this.opts.loadMorePadding>=t&&(s.addClass("select2-active"),this.opts.query({element:this.opts.element,term:r,page:i,context:o,matcher:this.opts.matcher,callback:this.bind(function(t){n.opened()&&(n.opts.populateResults.call(this,e,t.results,{term:r,page:i,context:o}),n.postprocessResults(t,!1,!1),!0===t.more?(s.detach().appendTo(e).text(n.opts.formatLoadMore(i+1)),window.setTimeout(function(){n.loadMoreIfNeeded()},10)):s.remove(),n.positionDropdown(),n.resultsPage=i,n.context=t.context)})})))},tokenize:function(){},updateResults:function(s){function n(){c.scrollTop(0),l.removeClass("select2-active"),u.positionDropdown()}function r(t){c.html(t),n()}var o,a,l=this.search,c=this.results,h=this.opts,u=this,d=l.val(),f=t.data(this.container,"select2-last-term");if((!0===s||!f||!i(d,f))&&(t.data(this.container,"select2-last-term",d),!0===s||!1!==this.showSearchInput&&this.opened())){var p=this.getMaximumSelectionSize();if(p>=1&&(o=this.data(),t.isArray(o)&&o.length>=p&&v(h.formatSelectionTooBig)))return r("<li class='select2-selection-limit'>"+h.formatSelectionTooBig(p)+"</li>"),e;if(l.val().length<h.minimumInputLength)return v(h.formatInputTooShort)?r("<li class='select2-no-results'>"+h.formatInputTooShort(l.val(),h.minimumInputLength)+"</li>"):r(""),e;if(h.maximumInputLength&&l.val().length>h.maximumInputLength)return v(h.formatInputTooLong)?r("<li class='select2-no-results'>"+h.formatInputTooLong(l.val(),h.maximumInputLength)+"</li>"):r(""),e;h.formatSearching&&0===this.findHighlightableChoices().length&&r("<li class='select2-searching'>"+h.formatSearching()+"</li>"),l.addClass("select2-active"),(a=this.tokenize())!=e&&null!=a&&l.val(a),this.resultsPage=1,h.query({element:h.element,term:l.val(),page:this.resultsPage,context:null,matcher:h.matcher,callback:this.bind(function(o){var a;return this.opened()?(this.context=o.context===e?null:o.context,this.opts.createSearchChoice&&""!==l.val()&&((a=this.opts.createSearchChoice.call(null,l.val(),o.results))!==e&&null!==a&&u.id(a)!==e&&null!==u.id(a)&&0===t(o.results).filter(function(){return i(u.id(this),u.id(a))}).length&&o.results.unshift(a)),0===o.results.length&&v(h.formatNoMatches)?(r("<li class='select2-no-results'>"+h.formatNoMatches(l.val())+"</li>"),e):(c.empty(),u.opts.populateResults.call(this,c,o.results,{term:l.val(),page:this.resultsPage,context:null}),!0===o.more&&v(h.formatLoadMore)&&(c.append("<li class='select2-more-results'>"+u.opts.escapeMarkup(h.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){u.loadMoreIfNeeded()},10)),this.postprocessResults(o,s),n(),this.opts.element.trigger({type:"loaded",data:o}),e)):(this.search.removeClass("select2-active"),e)})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){l(this.search)},selectHighlighted:function(t){var e=this.highlight(),s=this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data");s&&(this.highlight(e),this.onSelect(s,t))},getPlaceholder:function(){return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder},initContainerWidth:function(){var s=function(){var s,i,n,r,o;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if((s=this.opts.element.attr("style"))!==e)for(r=0,o=(i=s.split(";")).length;o>r;r+=1)if(null!==(n=i[r].replace(/\s/g,"").match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/))&&n.length>=1)return n[1];return"resolve"===this.opts.width?(s=this.opts.element.css("width")).indexOf("%")>0?s:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px":null}return t.isFunction(this.opts.width)?this.opts.width():this.opts.width}.call(this);null!==s&&this.container.css("width",s)}}),C=b(w,{createContainer:function(){return t(document.createElement("div")).attr({class:"select2-container"}).html(["<a href='javascript:void(0)' onclick='return false;' class='select2-choice' tabindex='-1'>","   <span></span><abbr class='select2-search-choice-close' style='display:none;'></abbr>","   <div><b></b></div>","</a>","<input class='select2-focusser select2-offscreen' type='text'/>","<div class='select2-drop' style='display:none'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' class='select2-input'/>","   </div>","   <ul class='select2-results'>","   </ul>","</div>"].join(""))},disable:function(){this.enabled&&(this.parent.disable.apply(this,arguments),this.focusser.attr("disabled","disabled"))},enable:function(){this.enabled||(this.parent.enable.apply(this,arguments),this.focusser.removeAttr("disabled"))},opening:function(){this.parent.opening.apply(this,arguments),this.focusser.attr("disabled","disabled"),this.opts.element.trigger(t.Event("open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.removeAttr("disabled"),l(this.focusser))},focus:function(){this.opened()?this.close():(this.focusser.removeAttr("disabled"),this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.removeAttr("disabled"),this.focusser.focus()},initContainer:function(){var s,i=this.container,n=this.dropdown;this.showSearch(this.opts.minimumResultsForSearch>=0),this.selection=s=i.find(".select2-choice"),this.focusser=i.find(".select2-focusser"),this.focusser.attr("id","s2id_autogen"+S()),t("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.focusser.attr("id")),this.search.bind("keydown",this.bind(function(t){if(this.enabled){if(t.which===y.PAGE_UP||t.which===y.PAGE_DOWN)return c(t),e;switch(t.which){case y.UP:case y.DOWN:return this.moveHighlight(t.which===y.UP?-1:1),c(t),e;case y.TAB:case y.ENTER:return this.selectHighlighted(),c(t),e;case y.ESC:return this.cancel(t),c(t),e}}})),this.search.bind("blur",this.bind(function(){document.activeElement===this.body().get(0)&&window.setTimeout(this.bind(function(){this.search.focus()}),0)})),this.focusser.bind("keydown",this.bind(function(t){return!this.enabled||t.which===y.TAB||y.isControl(t)||y.isFunctionKey(t)||t.which===y.ESC?e:!1===this.opts.openOnEnter&&t.which===y.ENTER?(c(t),e):t.which==y.DOWN||t.which==y.UP||t.which==y.ENTER&&this.opts.openOnEnter?(this.open(),c(t),e):t.which==y.DELETE||t.which==y.BACKSPACE?(this.opts.allowClear&&this.clear(),c(t),e):e})),o(this.focusser),this.focusser.bind("keyup-change input",this.bind(function(t){this.opened()||(this.open(),!1!==this.showSearchInput&&this.search.val(this.focusser.val()),this.focusser.val(""),c(t))})),s.delegate("abbr","mousedown",this.bind(function(t){this.enabled&&(this.clear(),function(t){t.preventDefault(),t.stopImmediatePropagation()}(t),this.close(),this.selection.focus())})),s.bind("mousedown",this.bind(function(t){!0,this.opened()?this.close():this.enabled&&this.open(),c(t),!1})),n.bind("mousedown",this.bind(function(){this.search.focus()})),s.bind("focus",this.bind(function(t){c(t)})),this.focusser.bind("focus",this.bind(function(){this.container.addClass("select2-container-active")})).bind("blur",this.bind(function(){this.opened()||this.container.removeClass("select2-container-active")})),this.search.bind("focus",this.bind(function(){this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.setPlaceholder()},clear:function(t){var e=this.selection.data("select2-data");e&&(this.opts.element.val(""),this.selection.find("span").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),!1!==t&&(this.opts.element.trigger({type:"removed",val:this.id(e),choice:e}),this.triggerChange({removed:e})))},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text())this.close(),this.setPlaceholder();else{var t=this;this.opts.initSelection.call(null,this.opts.element,function(s){s!==e&&null!==s&&(t.updateSelection(s),t.close(),t.setPlaceholder())})}},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments);return"select"===e.element.get(0).tagName.toLowerCase()?e.initSelection=function(e,s){var i=e.find(":selected");t.isFunction(s)&&s({id:i.attr("value"),text:i.text(),element:i})}:"data"in e&&(e.initSelection=e.initSelection||function(s,n){var r=s.val(),o=null;e.query({matcher:function(t,s,n){var a=i(r,e.id(n));return a&&(o=n),a},callback:t.isFunction(n)?function(){n(o)}:t.noop})}),e},getPlaceholder:function(){return this.select&&""!==this.select.find("option").first().text()?e:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var t=this.getPlaceholder();if(""===this.opts.element.val()&&t!==e){if(this.select&&""!==this.select.find("option:first").text())return;this.selection.find("span").html(this.opts.escapeMarkup(t)),this.selection.addClass("select2-default"),this.selection.find("abbr").hide()}},postprocessResults:function(t,s,n){var r=0,o=this,a=!0;if(this.findHighlightableChoices().each2(function(t,s){return i(o.id(s.data("select2-data")),o.opts.element.val())?(r=t,!1):e}),!1!==n&&this.highlight(r),!0===s){var l=this.opts.minimumResultsForSearch;a=!(0>l)&&_(t.results)>=l,this.showSearch(a)}},showSearch:function(e){this.showSearchInput=e,this.dropdown.find(".select2-search")[e?"removeClass":"addClass"]("select2-search-hidden"),t(this.dropdown,this.container)[e?"addClass":"removeClass"]("select2-with-searchbox")},onSelect:function(t,e){var s=this.opts.element.val();this.opts.element.val(this.id(t)),this.updateSelection(t),this.opts.element.trigger({type:"selected",val:this.id(t),choice:t}),this.close(),e&&e.noFocus||this.selection.focus(),i(s,this.id(t))||this.triggerChange()},updateSelection:function(t){var s,i=this.selection.find("span");this.selection.data("select2-data",t),i.empty(),(s=this.opts.formatSelection(t,i))!==e&&i.append(this.opts.escapeMarkup(s)),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==e&&this.selection.find("abbr").show()},val:function(){var t,s=!1,i=null,n=this;if(0===arguments.length)return this.opts.element.val();if(t=arguments[0],arguments.length>1&&(s=arguments[1]),this.select)this.select.val(t).find(":selected").each2(function(t,e){return i={id:e.attr("value"),text:e.text(),element:e.get(0)},!1}),this.updateSelection(i),this.setPlaceholder(),s&&this.triggerChange();else{if(this.opts.initSelection===e)throw Error("cannot call val() if initSelection() is not defined");if(!t&&0!==t)return this.clear(s),s&&this.triggerChange(),e;this.opts.element.val(t),this.opts.initSelection(this.opts.element,function(t){n.opts.element.val(t?n.id(t):""),n.updateSelection(t),n.setPlaceholder(),s&&n.triggerChange()})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(t){var s;return 0===arguments.length?((s=this.selection.data("select2-data"))==e&&(s=null),s):(t&&""!==t?(this.opts.element.val(t?this.id(t):""),this.updateSelection(t)):this.clear(),e)}}),x=b(w,{createContainer:function(){return t(document.createElement("div")).attr({class:"select2-container select2-container-multi"}).html(["    <ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi' style='display:none;'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""))},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments);return"select"===e.element.get(0).tagName.toLowerCase()?e.initSelection=function(t,e){var s=[];t.find(":selected").each2(function(t,e){s.push({id:e.attr("value"),text:e.text(),element:e[0]})}),e(s)}:"data"in e&&(e.initSelection=e.initSelection||function(s,r){var o=n(s.val(),e.separator),a=[];e.query({matcher:function(s,n,r){var l=t.grep(o,function(t){return i(t,e.id(r))}).length;return l&&a.push(r),l},callback:t.isFunction(r)?function(){r(a)}:t.noop})}),e},initContainer:function(){var s,i=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=s=this.container.find(i),this.search.attr("id","s2id_autogen"+S()),t("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.search.attr("id")),this.search.bind("input paste",this.bind(function(){this.enabled&&(this.opened()||this.open())})),this.search.bind("keydown",this.bind(function(t){if(this.enabled){if(t.which===y.BACKSPACE&&""===this.search.val()){this.close();var i,n=s.find(".select2-search-choice-focus");if(n.length>0)return this.unselect(n.first()),this.search.width(10),c(t),e;(i=s.find(".select2-search-choice:not(.select2-locked)")).length>0&&i.last().addClass("select2-search-choice-focus")}else s.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");if(this.opened())switch(t.which){case y.UP:case y.DOWN:return this.moveHighlight(t.which===y.UP?-1:1),c(t),e;case y.ENTER:case y.TAB:return this.selectHighlighted(),c(t),e;case y.ESC:return this.cancel(t),c(t),e}if(t.which!==y.TAB&&!y.isControl(t)&&!y.isFunctionKey(t)&&t.which!==y.BACKSPACE&&t.which!==y.ESC){if(t.which===y.ENTER){if(!1===this.opts.openOnEnter)return;if(t.altKey||t.ctrlKey||t.shiftKey||t.metaKey)return}this.open(),(t.which===y.PAGE_UP||t.which===y.PAGE_DOWN)&&c(t),t.which===y.ENTER&&c(t)}}})),this.search.bind("keyup",this.bind(this.resizeSearch)),this.search.bind("blur",this.bind(function(t){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.opened()||this.clearSearch(),t.stopImmediatePropagation()})),this.container.delegate(i,"mousedown",this.bind(function(e){this.enabled&&(t(e.target).closest(".select2-search-choice").length>0||(this.clearPlaceholder(),this.open(),this.focusSearch(),e.preventDefault()))})),this.container.delegate(i,"focus",this.bind(function(){this.enabled&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.clearSearch()},enable:function(){this.enabled||(this.parent.enable.apply(this,arguments),this.search.removeAttr("disabled"))},disable:function(){this.enabled&&(this.parent.disable.apply(this,arguments),this.search.attr("disabled",!0))},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var t=this;this.opts.initSelection.call(null,this.opts.element,function(s){s!==e&&null!==s&&(t.updateSelection(s),t.close(),t.clearSearch())})}},clearSearch:function(){var t=this.getPlaceholder();t!==e&&0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(t).addClass("select2-default"),this.search.width(this.getMaxSearchWidth())):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),this.opts.element.trigger(t.Event("open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(e){var i=[],n=[],r=this;t(e).each(function(){0>s(r.id(this),i)&&(i.push(r.id(this)),n.push(this))}),e=n,this.selection.find(".select2-search-choice").remove(),t(e).each(function(){r.addSelectedChoice(this)}),r.postprocessResults()},tokenize:function(){var t=this.search.val();null!=(t=this.opts.tokenizer(t,this.data(),this.bind(this.onSelect),this.opts))&&t!=e&&(this.search.val(t),t.length>0&&this.open())},onSelect:function(t,e){this.addSelectedChoice(t),this.opts.element.trigger({type:"selected",val:this.id(t),choice:t}),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()&&this.updateResults(!0),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:t}),e&&e.noFocus||this.focusSearch()},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(s){var i,n=!s.locked,r=t("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),o=t("<li class='select2-search-choice select2-locked'><div></div></li>"),a=n?r:o,l=this.id(s),h=this.getVal();(i=this.opts.formatSelection(s,a.find("div")))!=e&&a.find("div").replaceWith("<div>"+this.opts.escapeMarkup(i)+"</div>"),n&&a.find(".select2-search-choice-close").bind("mousedown",c).bind("click dblclick",this.bind(function(e){this.enabled&&(t(e.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(t(e.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),this.close(),this.focusSearch()})).dequeue(),c(e))})).bind("focus",this.bind(function(){this.enabled&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),a.data("select2-data",s),a.insertBefore(this.searchContainer),h.push(l),this.setVal(h)},unselect:function(t){var e,i,n=this.getVal();if(0===(t=t.closest(".select2-search-choice")).length)throw"Invalid argument: "+t+". Must be .select2-search-choice";(e=t.data("select2-data"))&&((i=s(this.id(e),n))>=0&&(n.splice(i,1),this.setVal(n),this.select&&this.postprocessResults()),t.remove(),this.opts.element.trigger({type:"removed",val:this.id(e),choice:e}),this.triggerChange({removed:e}))},postprocessResults:function(){var t=this.getVal(),e=this.results.find(".select2-result"),i=this.results.find(".select2-result-with-children"),n=this;e.each2(function(e,i){s(n.id(i.data("select2-data")),t)>=0&&(i.addClass("select2-selected"),i.find(".select2-result-selectable").addClass("select2-selected"))}),i.each2(function(t,e){e.is(".select2-result-selectable")||0!==e.find(".select2-result-selectable:not(.select2-selected)").length||e.addClass("select2-selected")}),-1==this.highlight()&&n.highlight(0)},getMaxSearchWidth:function(){return this.selection.width()-r(this.search)},resizeSearch:function(){var t,e,s,i,n=r(this.search);t=h(this.search)+10,e=this.search.offset().left,t>(i=(s=this.selection.width())-(e-this.selection.offset().left)-n)&&(i=s-n),40>i&&(i=s-n),0>=i&&(i=t),this.search.width(i)},getVal:function(){var t;return this.select?null===(t=this.select.val())?[]:t:n(t=this.opts.element.val(),this.opts.separator)},setVal:function(e){var i;this.select?this.select.val(e):(i=[],t(e).each(function(){0>s(this,i)&&i.push(this)}),this.opts.element.val(0===i.length?"":i.join(this.opts.separator)))},val:function(){var s,i=!1,n=this;if(0===arguments.length)return this.getVal();if(s=arguments[0],arguments.length>1&&(i=arguments[1]),!s&&0!==s)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),i&&this.triggerChange(),e;if(this.setVal(s),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),i&&this.triggerChange();else{if(this.opts.initSelection===e)throw Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(e){var s=t(e).map(n.id);n.setVal(s),n.updateSelection(e),n.clearSearch(),i&&n.triggerChange()})}this.clearSearch()},onSortStart:function(){if(this.select)throw Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var e=[],s=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){e.push(s.opts.id(t(this).data("select2-data")))}),this.setVal(e),this.triggerChange()},data:function(s){var i,n=this;return 0===arguments.length?this.selection.find(".select2-search-choice").map(function(){return t(this).data("select2-data")}).get():(s||(s=[]),i=t.map(s,function(t){return n.opts.id(t)}),this.setVal(i),this.updateSelection(s),this.clearSearch(),e)}}),t.fn.select2=function(){var i,n,r,o,a=Array.prototype.slice.call(arguments,0),l=["val","destroy","opened","open","close","focus","isFocused","container","onSortStart","onSortEnd","enable","disable","positionDropdown","data"];return this.each(function(){if(0===a.length||"object"==typeof a[0])(i=0===a.length?{}:t.extend({},a[0])).element=t(this),"select"===i.element.get(0).tagName.toLowerCase()?o=i.element.attr("multiple"):(o=i.multiple||!1,"tags"in i&&(i.multiple=o=!0)),(n=o?new x:new C).init(i);else{if("string"!=typeof a[0])throw"Invalid arguments to select2 plugin: "+a;if(0>s(a[0],l))throw"Unknown method: "+a[0];if(r=e,(n=t(this).data("select2"))===e)return;if((r="container"===a[0]?n.container:n[a[0]].apply(n,a.slice(1)))!==e)return!1}}),r===e?this:r},t.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(t,e,s,i){var n=[];return d(t.text,s.term,n,i),n.join("")},formatSelection:function(t){return t?t.text:e},sortResults:function(t){return t},formatResultCssClass:function(){return e},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(t,e){var s=e-t.length;return"Please enter "+s+" more character"+(1==s?"":"s")},formatInputTooLong:function(t,e){var s=t.length-e;return"Please delete "+s+" character"+(1==s?"":"s")},formatSelectionTooBig:function(t){return"You can only select "+t+" item"+(1==t?"":"s")},formatLoadMore:function(){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(t){return t.id},matcher:function(t,e){return(""+e).toUpperCase().indexOf((""+t).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:function(t,s,n,r){var o,a,l,c,h,u=t,d=!1;if(!r.createSearchChoice||!r.tokenSeparators||1>r.tokenSeparators.length)return e;for(;;){for(a=-1,l=0,c=r.tokenSeparators.length;c>l&&(h=r.tokenSeparators[l],!((a=t.indexOf(h))>=0));l++);if(0>a)break;if(o=t.substring(0,a),t=t.substring(a+h.length),o.length>0&&(o=r.createSearchChoice(o,s))!==e&&null!==o&&r.id(o)!==e&&null!==r.id(o)){for(d=!1,l=0,c=s.length;c>l;l++)if(i(r.id(o),r.id(s[l]))){d=!0;break}d||n(o)}}return u!==t?t:e},escapeMarkup:function(t){var e={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;","/":"&#47;"};return(t+"").replace(/[&<>"'\/\\]/g,function(t){return e[t[0]]})},blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(t){return t},adaptDropdownCssClass:function(){return null}},window.Select2={query:{ajax:f,local:p,tags:g},util:{debounce:a,markMatch:d},class:{abstract:w,single:C,multi:x}})}(jQuery);
